<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BSH's Travel</title>
  <link rel="icon" href="../image/favicon.png" type="image/png" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="../css/travel_map.css">
</head>
<body>

  <div class="sidebar" id="sidebar">
    <a href="/bsh_travel/main" title="ë©”ì¸ìœ¼ë¡œ ì´ë™">
      <img src="../image/travel_logo.png" alt="BSH Travel Logo" class="logo" />
    </a>
    <div class="country-list" id="countryList"></div>
    <button id="toggleBtn" title="ì‚¬ì´ë“œë°” ë‹«ê¸°">ğŸ¡„</button>
    <div class="description" id="description"></div>
    <button id="showCountryListBtn" class="title-btn hidden">â† ë‚˜ë¼ ëª©ë¡ ë³´ê¸°</button>
  </div>
  <button id="openBtn" title="ì‚¬ì´ë“œë°” ì—´ê¸°">â˜°</button>

  <div class="mobile-controls" id="mobileControls">
    <div class="country-slider-container">
      <div id="country-slider" class="country-slider"></div>
    </div>
    <div id="info-panel" class="info-panel">
      <button id="back-button" class="back-button hidden">â† ë’¤ë¡œê°€ê¸°</button>
      <div id="content-list"></div>
    </div>
  </div>
  <button id="mobileToggleBtn">â˜°</button>
  <a href="/bsh_travel/main" id="mobileHomeBtn" title="ë©”ì¸ìœ¼ë¡œ ì´ë™">ğŸ </a>

  <div id="map"></div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>
    // ì£¼ìš” DOM ìš”ì†Œ
    const sidebar = document.getElementById("sidebar");
    const description = document.getElementById("description");
    const mapDiv = document.getElementById("map");
    const toggleBtn = document.getElementById("toggleBtn");
    const openBtn = document.getElementById("openBtn");
    const countryListDiv = document.getElementById("countryList");
    const showCountryListBtn = document.getElementById("showCountryListBtn");

    const mobileControls = document.getElementById("mobileControls");
    const countrySlider = document.getElementById("country-slider");
    const infoPanel = document.getElementById("info-panel");
    const contentList = document.getElementById("content-list");
    const backButton = document.getElementById("back-button");
    const mobileToggleBtn = document.getElementById("mobileToggleBtn");
    

    let map, allCityMarkers = [], currentDetailMarkers = [], selectedCityMarker = null, selectedDetailMarker = null, selectedDetailListItem = null;
    let currentView = 'countries'; // 'countries', 'cities', 'details'
    let currentCountry = null;
    let currentCity = null;

    // ê³µí†µ ë°ì´í„° (ìƒëµ)
    const data = [
    	{
            name: "ì¼ë³¸",
            cities: [
                { name: "ğŸ£ í›„ì¿ ì˜¤ì¹´", lat: 33.5904, lng: 130.4017, desc: "ë²šê½ƒ ì‹œì¦Œì— ê°”ëŠ”ë° ë„ˆë¬´ ì•„ë¦„ë‹¤ì› ì–´ìš”.", sights: [{ name: "í›„ì¿ ì˜¤ì¹´ íƒ€ì›Œ", lat: 33.5936, lng: 130.3506, imageUrl: "./image/egg.jpg" }, { name: "ìºë„ì‹œí‹° í•˜ì¹´íƒ€", lat: 33.5898, lng: 130.4101, imageUrl: "../image/airplane.png" }, { name: "ì˜¤í˜¸ë¦¬ ê³µì›", lat: 33.5919, lng: 130.3756, imageUrl: "./image/egg.jpg" }], foods: [{ name: "ëˆì½”ì¸  ë¼ë©˜", lat: 33.5960, lng: 130.4024, imageUrl: "./image/egg.jpg" }, { name: "ëª¨ì¸ ë‚˜ë² ", lat: 33.5977, lng: 130.4053, imageUrl: "./image/egg.jpg" }, { name: "ëª…ë€ì “", lat: 33.5904, lng: 130.4017, imageUrl: "./image/egg.jpg" }] },
                { name: "ğŸ£ ì‹œëª¨ë…¸ì„¸í‚¤", lat: 33.9575, lng: 130.9312, desc: "ë²šê½ƒ ì‹œì¦Œì— ê°”ëŠ”ë° ë„ˆë¬´ ì•„ë¦„ë‹¤ì› ì–´ìš”.", sights: [{ name: "ê°€ë¼í†  ì‹œì¥", lat: 33.9575, lng: 130.9312, imageUrl: "./image/egg.jpg" }, { name: "ì‹œëª¨ë…¸ì„¸í‚¤ í•­", lat: 33.9590, lng: 130.9350, imageUrl: "./image/egg.jpg" }], foods: [{ name: "ë³µì–´íšŒ", lat: 33.9570, lng: 130.9315, imageUrl: "./image/egg.jpg" }] },
                { name: "ğŸ£ ì´í† ì‹œë§ˆ", lat: 33.5701, lng: 130.2227, desc: "ë²šê½ƒ ì‹œì¦Œì— ê°”ëŠ”ë° ë„ˆë¬´ ì•„ë¦„ë‹¤ì› ì–´ìš”.", sights: [{ name: "ì‚¬ì¿ ë¼ì´ í›„íƒ€ë¯¸ê°€ìš°ë¼", lat: 33.6062, lng: 130.1706, imageUrl: "./image/egg.jpg" }, { name: "ì•¼ìë‚˜ë¬´ ê°€ë¡œìˆ˜", lat: 33.6060, lng: 130.1708, imageUrl: "./image/egg.jpg" }], foods: [{ name: "êµ´ ìš”ë¦¬", lat: 33.5977, lng: 130.2250, imageUrl: "./image/egg.jpg" }] },
                { name: "ğŸ£ ë„ì¿„", lat: 35.6586, lng: 139.7454, desc: "ë²šê½ƒ ì‹œì¦Œì— ê°”ëŠ”ë° ë„ˆë¬´ ì•„ë¦„ë‹¤ì› ì–´ìš”.", sights: [{ name: "ë„ì¿„ íƒ€ì›Œ", lat: 35.6586, lng: 139.7454, imageUrl: "./image/egg.jpg" }, { name: "ì•„ì‚¬ì¿ ì‚¬", lat: 35.7147, lng: 139.7967, imageUrl: "./image/egg.jpg" }, { name: "ì‹œë¶€ì•¼ ìŠ¤í¬ë¨ë¸”", lat: 35.6597, lng: 139.7005, imageUrl: "./image/egg.jpg" }], foods: [{ name: "ìŠ¤ì‹œ", lat: 35.6812, lng: 139.7671, imageUrl: "./image/egg.jpg" }, { name: "ë¼ë©˜", lat: 35.6983, lng: 139.7717, imageUrl: "./image/egg.jpg" }, { name: "ëª¨ì°Œ", lat: 35.7001, lng: 139.7820, imageUrl: "./image/egg.jpg" }] },
                { name: "ğŸ£ ì˜¤ì‚¬ì¹´", lat: 34.6937, lng: 135.5023, desc: "ë²šê½ƒ ì‹œì¦Œì— ê°”ëŠ”ë° ë„ˆë¬´ ì•„ë¦„ë‹¤ì› ì–´ìš”.", sights: [{ name: "ì˜¤ì‚¬ì¹´ ì„±", lat: 34.6873, lng: 135.5255, imageUrl: "./image/egg.jpg" }, { name: "ë„í†¤ë³´ë¦¬", lat: 34.6687, lng: 135.5005, imageUrl: "./image/egg.jpg" }, { name: "ìœ ë‹ˆë²„ì„¤ ìŠ¤íŠœë””ì˜¤ ì¬íŒ¬", lat: 34.6654, lng: 135.4323, imageUrl: "./image/egg.jpg" }], foods: [{ name: "ì˜¤ì½”ë…¸ë¯¸ì•¼í‚¤", lat: 34.6687, lng: 135.5005, imageUrl: "./image/egg.jpg" }, { name: "íƒ€ì½”ì•¼í‚¤", lat: 34.6682, lng: 135.5001, imageUrl: "./image/egg.jpg" }, { name: "ì¿ ì‹œì¹´ì¸ ", lat: 34.6525, lng: 135.5065, imageUrl: "./image/egg.jpg" }] },
                { name: "ğŸ£ êµí† ", lat: 35.0116, lng: 135.7681, desc: "ë²šê½ƒ ì‹œì¦Œì— ê°”ëŠ”ë° ë„ˆë¬´ ì•„ë¦„ë‹¤ì› ì–´ìš”.", sights: [{ name: "ê¸°ìš”ë¯¸ì¦ˆë°ë¼", lat: 34.9949, lng: 135.7850, imageUrl: "./image/egg.jpg" }, { name: "ê¸ˆê°ì‚¬", lat: 35.0396, lng: 135.7292, imageUrl: "./image/egg.jpg" }, { name: "ì•„ë¼ì‹œì•¼ë§ˆ", lat: 35.0116, lng: 135.6795, imageUrl: "./image/egg.jpg" }], foods: [{ name: "êµí†  ì•¼ì±„ ìš”ë¦¬", lat: 35.0060, lng: 135.7725, imageUrl: "./image/egg.jpg" }, { name: "ë‘ë¶€ ìš”ë¦¬", lat: 35.0080, lng: 135.7735, imageUrl: "./image/egg.jpg" }, { name: "ë§ì°¨", lat: 35.0090, lng: 135.7745, imageUrl: "./image/egg.jpg" }] },
                { name: "ğŸ£ ë‚˜ë¼", lat: 34.6851, lng: 135.8048, desc: "ë²šê½ƒ ì‹œì¦Œì— ê°”ëŠ”ë° ë„ˆë¬´ ì•„ë¦„ë‹¤ì› ì–´ìš”.", sights: [{ name: "ë‚˜ë¼ ê³µì›", lat: 34.6844, lng: 135.8433, imageUrl: "./image/egg.jpg" }, { name: "ë„ë‹¤ì´ì§€", lat: 34.6881, lng: 135.8398, imageUrl: "./image/egg.jpg" }], foods: [{ name: "ë‚˜ë¼ì¦ˆì¼€", lat: 34.6851, lng: 135.8048, imageUrl: "./image/egg.jpg" }, { name: "ì¹´í‚¤ë…¸í•˜ì¦ˆì‹œ", lat: 34.6871, lng: 135.8058, imageUrl: "./image/egg.jpg" }] },
                { name: "ğŸ£ ê³ ë² ", lat: 34.6913, lng: 135.1830, desc: "ë²šê½ƒ ì‹œì¦Œì— ê°”ëŠ”ë° ë„ˆë¬´ ì•„ë¦„ë‹¤ì› ì–´ìš”.", sights: [{ name: "ê³ ë²  í¬íŠ¸ íƒ€ì›Œ", lat: 34.6841, lng: 135.1915, imageUrl: "./image/egg.jpg" }, { name: "ì´ì§„ì¹¸ ê±°ë¦¬", lat: 34.7001, lng: 135.1884, imageUrl: "./image/egg.jpg" }], foods: [{ name: "ê³ ë² ê·œ", lat: 34.6913, lng: 135.1830, imageUrl: "./image/egg.jpg" }, { name: "ì•„ì¹´ì‹œì•¼í‚¤", lat: 34.6465, lng: 135.0003, imageUrl: "./image/egg.jpg" }] },
                { name: "ğŸ£ ì‚¿í¬ë¡œ", lat: 43.0618, lng: 141.3545, desc: "ë²šê½ƒ ì‹œì¦Œì— ê°”ëŠ”ë° ë„ˆë¬´ ì•„ë¦„ë‹¤ì› ì–´ìš”.", sights: [{ name: "ì˜¤ë„ë¦¬ ê³µì›", lat: 43.0607, lng: 141.3517, imageUrl: "./image/egg.jpg" }, { name: "ì‚¿í¬ë¡œ ë§¥ì£¼ ë°•ë¬¼ê´€", lat: 43.0766, lng: 141.3712, imageUrl: "./image/egg.jpg" }], foods: [{ name: "ì‚¿í¬ë¡œ ë¼ë©˜", lat: 43.0618, lng: 141.3545, imageUrl: "./image/egg.jpg" }, { name: "ì§•ê¸°ìŠ¤ì¹¸", lat: 43.0628, lng: 141.3555, imageUrl: "./image/egg.jpg" }] },
                { name: "ğŸ£ ëŒ€ë§ˆë„", lat: 34.2045, lng: 129.2785, desc: "ë²šê½ƒ ì‹œì¦Œì— ê°”ëŠ”ë° ë„ˆë¬´ ì•„ë¦„ë‹¤ì› ì–´ìš”.", sights: [{ name: "ì™€íƒ€ì¦ˆë¯¸ ì‹ ì‚¬", lat: 34.4093, lng: 129.2891, imageUrl: "./image/egg.jpg" }, { name: "ë¯¸ìš°ë‹¤ í•´ë³€", lat: 34.6366, lng: 129.4180, imageUrl: "./image/egg.jpg" }], foods: [{ name: "ì´ì‹œì•¼í‚¤", lat: 34.2045, lng: 129.2785, imageUrl: "./image/egg.jpg" }, { name: "í† ë…¸ì´ì¹˜", lat: 34.2055, lng: 129.2795, imageUrl: "./image/egg.jpg" }] }
            ]
        },
        {
            name: "ì¤‘êµ­",
            cities: [
                { name: "ğŸ¼ ê´‘ì €ìš°", lat: 23.1291, lng: 113.2644, desc: "ê´‘ì €ìš°ëŠ” í™œê¸°ì°¬ ë„ì‹œì…ë‹ˆë‹¤.", sights: [{ name: "ê´‘ì €ìš° íƒ€ì›Œ", lat: 23.1068, lng: 113.3217, imageUrl: "./image/egg.jpg" }, { name: "ì§„ê°€ì‚¬", lat: 23.1166, lng: 113.2541, imageUrl: "./image/egg.jpg" }, { name: "ìƒ¤ë¯¸ì•ˆ", lat: 23.1091, lng: 113.2458, imageUrl: "./image/egg.jpg" }], foods: [{ name: "ë”¤ì„¬", lat: 23.1311, lng: 113.2655, imageUrl: "./image/egg.jpg" }, { name: "ê´‘ë™ì‹ ë¡œìŠ¤íŠ¸ êµ¬ìŠ¤", lat: 23.1288, lng: 113.2601, imageUrl: "./image/egg.jpg" }] },
                { name: "ğŸ¼ ìƒí•˜ì´", lat: 31.2304, lng: 121.4737, desc: "ë™ì„œì–‘ì´ ê³µì¡´í•˜ëŠ” ìƒí•˜ì´ëŠ” ë§¤ë ¥ì ì¸ ê³³ì…ë‹ˆë‹¤.", sights: [{ name: "ì™€ì´íƒ„", lat: 31.2372, lng: 121.4870, imageUrl: "./image/egg.jpg" }, { name: "ë™ë°©ëª…ì£¼", lat: 31.2397, lng: 121.4996, imageUrl: "./image/egg.jpg" }, { name: "ì˜ˆì›", lat: 31.2268, lng: 121.4939, imageUrl: "./image/egg.jpg" }], foods: [{ name: "ìƒ¤ì˜¤ë¡±ë°”ì˜¤", lat: 31.2301, lng: 121.4745, imageUrl: "./image/egg.jpg" }, { name: "í™ì†Œìœ¡", lat: 31.2295, lng: 121.4720, imageUrl: "./image/egg.jpg" }] },
                { name: "ğŸ¼ ë² ì´ì§•", lat: 39.9042, lng: 116.4074, desc: "ì¤‘êµ­ì˜ ìˆ˜ë„, ë² ì´ì§•ì…ë‹ˆë‹¤.", sights: [{ name: "ìê¸ˆì„±", lat: 39.9163, lng: 116.3972, imageUrl: "./image/egg.jpg" }, { name: "ë§Œë¦¬ì¥ì„±", lat: 40.4319, lng: 116.5704, imageUrl: "./image/egg.jpg" }, { name: "ì²œì•ˆë¬¸ ê´‘ì¥", lat: 39.9056, lng: 116.3913, imageUrl: "./image/egg.jpg" }], foods: [{ name: "ë¶ê²½ì˜¤ë¦¬", lat: 39.9080, lng: 116.4050, imageUrl: "./image/egg.jpg" }, { name: "ë§ˆë¼íƒ•", lat: 39.9030, lng: 116.4080, imageUrl: "./image/egg.jpg" }] }
            ]
        },
        {
            name: "ëŒ€ë§Œ",
            cities: [
                { name: "ğŸ® íƒ€ì´ë² ì´", lat: 25.0330, lng: 121.5654, desc: "ëŒ€ë§Œì˜ í™œê¸°ì°¬ ìˆ˜ë„, íƒ€ì´ë² ì´ì…ë‹ˆë‹¤.", sights: [{ name: "íƒ€ì´ë² ì´ 101", lat: 25.0339, lng: 121.5645, imageUrl: "./image/egg.jpg" }, { name: "êµ­ë¦½ê³ ê¶ë°•ë¬¼ì›", lat: 25.1017, lng: 121.5484, imageUrl: "./image/egg.jpg" }, { name: "ìš©ì‚°ì‚¬", lat: 25.0366, lng: 121.4999, imageUrl: "./image/egg.jpg" }], foods: [{ name: "ìš°ìœ¡ë©´", lat: 25.0335, lng: 121.5659, imageUrl: "./image/egg.jpg" }, { name: "ì§€íŒŒì´", lat: 25.0478, lng: 121.5173, imageUrl: "./image/egg.jpg" }] },
                { name: "ğŸ® ì§€ìš°í€", lat: 25.1091, lng: 121.8449, desc: "ì„¼ê³¼ ì¹˜íˆë¡œì˜ í–‰ë°©ë¶ˆëª… ë°°ê²½ì§€ë¡œ ìœ ëª…í•œ ì§€ìš°í€ì…ë‹ˆë‹¤.", sights: [{ name: "ì§€ìš°í€ ì˜›ê±°ë¦¬", lat: 25.1091, lng: 121.8449, imageUrl: "./image/egg.jpg" }, { name: "ìˆ˜ì¹˜ë£¨", lat: 25.1105, lng: 121.8455, imageUrl: "./image/egg.jpg" }], foods: [{ name: "ë•…ì½© ì•„ì´ìŠ¤í¬ë¦¼", lat: 25.1090, lng: 121.8445, imageUrl: "./image/egg.jpg" }, { name: "ì˜¤ì§•ì–´ êµ¬ì´", lat: 25.1085, lng: 121.8450, imageUrl: "./image/egg.jpg" }] }
            ]
        },
        {
            name: "ë² íŠ¸ë‚¨",
            cities: [
                { name: "ğŸŒ¾ ë‹¤ë‚­", lat: 16.0544, lng: 108.2022, desc: "ë² íŠ¸ë‚¨ ì¤‘ë¶€ì˜ ì•„ë¦„ë‹¤ìš´ í•´ì•ˆ ë„ì‹œì…ë‹ˆë‹¤.", sights: [{ name: "ë°”ë‚˜í", lat: 15.9926, lng: 108.0645, imageUrl: "./image/egg.jpg" }, { name: "ë¯¸ì¼€ ë¹„ì¹˜", lat: 16.0689, lng: 108.2427, imageUrl: "./image/egg.jpg" }, { name: "í˜¸ì´ì•ˆ ì˜¬ë“œíƒ€ìš´", lat: 15.8794, lng: 108.3283, imageUrl: "./image/egg.jpg" }], foods: [{ name: "ë°˜ì„ì˜¤", lat: 16.0617, lng: 108.2255, imageUrl: "./image/egg.jpg" }, { name: "ë¶„ì§œ", lat: 16.0640, lng: 108.2260, imageUrl: "./image/egg.jpg" }] },
                { name: "ğŸŒ¾ í•˜ë…¸ì´", lat: 21.0285, lng: 105.8542, desc: "ë² íŠ¸ë‚¨ì˜ ìˆ˜ë„, í•˜ë…¸ì´ì…ë‹ˆë‹¤.", sights: [{ name: "í˜¸ì•ˆë¼ì—  í˜¸ìˆ˜", lat: 21.0288, lng: 105.8522, imageUrl: "./image/egg.jpg" }, { name: "í•˜ë…¸ì´ ì˜¬ë“œ ì¿¼í„°", lat: 21.0335, lng: 105.8499, imageUrl: "./image/egg.jpg" }], foods: [{ name: "ìŒ€êµ­ìˆ˜", lat: 21.0280, lng: 105.8545, imageUrl: "./image/egg.jpg" }, { name: "ë°˜ë¯¸", lat: 21.0290, lng: 105.8530, imageUrl: "./image/egg.jpg" }] },
                { name: "ğŸŒ¾ ì‚¬íŒŒ", lat: 22.3333, lng: 103.8333, desc: "ë² íŠ¸ë‚¨ ë¶ë¶€ ê³ ì›ì˜ ì•„ë¦„ë‹¤ìš´ ë§ˆì„ì…ë‹ˆë‹¤.", sights: [{ name: "íŒì‹œíŒ", lat: 22.3040, lng: 103.7850, imageUrl: "./image/egg.jpg" }, { name: "ê¹Ÿê¹Ÿ ë§ˆì„", lat: 22.3270, lng: 103.8310, imageUrl: "./image/egg.jpg" }], foods: [{ name: "ì—°ì–´ í•«íŒŸ", lat: 22.3325, lng: 103.8330, imageUrl: "./image/egg.jpg" }, { name: "ë¼ì§€ê³ ê¸° ê¼¬ì¹˜", lat: 22.3335, lng: 103.8340, imageUrl: "./image/egg.jpg" }] }
            ]
        },
        {
            name: "ì‹±ê°€í¬ë¥´",
            cities: [
                { name: "ğŸ¦ ì‹±ê°€í¬ë¥´", lat: 1.3521, lng: 103.8198, desc: "ê¹¨ë—í•˜ê³  í˜„ëŒ€ì ì¸ ë„ì‹œêµ­ê°€, ì‹±ê°€í¬ë¥´ì…ë‹ˆë‹¤.", sights: [{ name: "ë§ˆë¦¬ë‚˜ ë² ì´ ìƒŒì¦ˆ", lat: 1.2833, lng: 103.8587, imageUrl: "./image/egg.jpg" }, { name: "ê°€ë“ ìŠ¤ ë°”ì´ ë” ë² ì´", lat: 1.2816, lng: 103.8637, imageUrl: "./image/egg.jpg" }, { name: "ì„¼í† ì‚¬ ì„¬", lat: 1.2547, lng: 103.8202, imageUrl: "./image/egg.jpg" }], foods: [{ name: "ì¹ ë¦¬ í¬ë©", lat: 1.2916, lng: 103.8568, imageUrl: "./image/egg.jpg" }, { name: "ì¹´ì•¼ í† ìŠ¤íŠ¸", lat: 1.2858, lng: 103.8443, imageUrl: "./image/egg.jpg" }] }
            ]
        },
        {
            name: "ë¼ì˜¤ìŠ¤",
            cities: [
                { name: "ğŸ›• ë°©ë¹„ì—¥", lat: 18.9103, lng: 102.4468, desc: "ìì—°ì´ ì•„ë¦„ë‹¤ìš´ ë°©ë¹„ì—¥ì…ë‹ˆë‹¤.", sights: [{ name: "ë¸”ë£¨ë¼êµ°", lat: 18.9140, lng: 102.3990, imageUrl: "./image/egg.jpg" }, { name: "íƒì§± ë™êµ´", lat: 18.9050, lng: 102.4500, imageUrl: "./image/egg.jpg" }], foods: [{ name: "ë°”ê²ŒíŠ¸ ìƒŒë“œìœ„ì¹˜", lat: 18.9110, lng: 102.4470, imageUrl: "./image/egg.jpg" }, { name: "ë¼ì˜¤ìŠ¤ ë°”ë¹„í", lat: 18.9100, lng: 102.4480, imageUrl: "./image/egg.jpg" }] }
            ]
        },
        {
            name: "ë§ë ˆì´ì‹œì•„",
            cities: [
                { name: "ğŸ•Œ ì¿ ì•Œë¼ë£¸í‘¸ë¥´", lat: 3.1390, lng: 101.6869, desc: "í™œê¸°ì°¬ ìˆ˜ë„, ì¿ ì•Œë¼ë£¸í‘¸ë¥´ì…ë‹ˆë‹¤.", sights: [{ name: "í˜íŠ¸ë¡œë‚˜ìŠ¤ íŠ¸ìœˆ íƒ€ì›Œ", lat: 3.1578, lng: 101.7119, imageUrl: "./image/egg.jpg" }, { name: "ë°”íˆ¬ ë™êµ´", lat: 3.2378, lng: 101.6841, imageUrl: "./image/egg.jpg" }], foods: [{ name: "ë‚˜ì‹œ ë¥´ë§‰", lat: 3.1412, lng: 101.6865, imageUrl: "./image/egg.jpg" }, { name: "ì‚¬í…Œ", lat: 3.1400, lng: 101.6880, imageUrl: "./image/egg.jpg" }] }
            ]
        },
        {
            name: "íƒœêµ­",
            cities: [
                { name: "ğŸ˜ ë°©ì½•", lat: 13.7563, lng: 100.5018, desc: "í™œê¸°ì°¬ ìˆ˜ë„, ë°©ì½•ì…ë‹ˆë‹¤.", sights: [{ name: "ì™•ê¶", lat: 13.7540, lng: 100.4930, imageUrl: "./image/egg.jpg" }, { name: "ì™“ ì•„ë£¬", lat: 13.7460, lng: 100.4880, imageUrl: "./image/egg.jpg" }], foods: [{ name: "íŒŸíƒ€ì´", lat: 13.7550, lng: 100.5020, imageUrl: "./image/egg.jpg" }, { name: "ë§ê³  ìŠ¤í‹°í‚¤ ë¼ì´ìŠ¤", lat: 13.7570, lng: 100.5030, imageUrl: "./image/egg.jpg" }] }
            ]
        },
        {
            name: "í•„ë¦¬í•€",
            cities: [
                { name: "ğŸŒŠ ì„¸ë¶€", lat: 10.3157, lng: 123.8854, desc: "ì•„ë¦„ë‹¤ìš´ í•´ë³€ê³¼ ë‹¤ì´ë¹™ ëª…ì†Œë¡œ ìœ ëª…í•œ ì„¸ë¶€ì…ë‹ˆë‹¤.", sights: [{ name: "ë§‰íƒ„ ì„¬", lat: 10.3000, lng: 123.9500, imageUrl: "./image/egg.jpg" }, { name: "ê°€ì™€ì‚° í­í¬", lat: 9.8000, lng: 123.3700, imageUrl: "./image/egg.jpg" }], foods: [{ name: "ë ˆì´Œ", lat: 10.3160, lng: 123.8860, imageUrl: "./image/egg.jpg" }, { name: "ì‚°ë¯¸êµ¬ì—˜", lat: 10.3150, lng: 123.8840, imageUrl: "./image/egg.jpg" }] }
            ]
        },
        {
            name: "í”„ë‘ìŠ¤",
            cities: [
                { name: "ğŸ—¼ íŒŒë¦¬", lat: 48.8566, lng: 2.3522, desc: "ì˜ˆìˆ ê³¼ ë‚­ë§Œì˜ ë„ì‹œ, íŒŒë¦¬ì…ë‹ˆë‹¤.", sights: [{ name: "ì—í íƒ‘", lat: 48.8584, lng: 2.2945, imageUrl: "./image/egg.jpg" }, { name: "ë£¨ë¸Œë¥´ ë°•ë¬¼ê´€", lat: 48.8606, lng: 2.3376, imageUrl: "./image/egg.jpg" }, { name: "ê°œì„ ë¬¸", lat: 48.8738, lng: 2.2950, imageUrl: "./image/egg.jpg" }], foods: [{ name: "ë°”ê²ŒíŠ¸", lat: 48.8570, lng: 2.3530, imageUrl: "./image/egg.jpg" }, { name: "ë§ˆì¹´ë¡±", lat: 48.8580, lng: 2.3540, imageUrl: "./image/egg.jpg" }] }
            ]
        },
        {
            name: "ì˜êµ­",
            cities: [
                { name: "ğŸ° ëŸ°ë˜", lat: 51.5074, lng: -0.1278, desc: "ì—­ì‚¬ì™€ í˜„ëŒ€ê°€ ì–´ìš°ëŸ¬ì§„ ë„ì‹œ, ëŸ°ë˜ì…ë‹ˆë‹¤.", sights: [{ name: "ë¹…ë²¤", lat: 51.5007, lng: -0.1246, imageUrl: "./image/egg.jpg" }, { name: "ëŸ°ë˜ íƒ€ì›Œ", lat: 51.5081, lng: -0.0759, imageUrl: "./image/egg.jpg" }, { name: "ë²„í‚¹ì—„ ê¶ì „", lat: 51.5014, lng: -0.1419, imageUrl: "./image/egg.jpg" }], foods: [{ name: "í”¼ì‰¬ ì•¤ ì¹©ìŠ¤", lat: 51.5070, lng: -0.1280, imageUrl: "./image/egg.jpg" }, { name: "ì˜êµ­ì‹ ì•„ì¹¨ ì‹ì‚¬", lat: 51.5080, lng: -0.1290, imageUrl: "./image/egg.jpg" }] }
            ]
        },
        {
            name: "ë…ì¼",
            cities: [
                { name: "ğŸº ë² ë¥¼ë¦°", lat: 52.5200, lng: 13.4050, desc: "ë…ì¼ì˜ ìˆ˜ë„, ë² ë¥¼ë¦°ì…ë‹ˆë‹¤.", sights: [{ name: "ë¸Œë€ë´ë¶€ë¥´í¬ ë¬¸", lat: 52.5163, lng: 13.3777, imageUrl: "./image/egg.jpg" }, { name: "ë² ë¥¼ë¦° ì¥ë²½", lat: 52.5065, lng: 13.3941, imageUrl: "./image/egg.jpg" }], foods: [{ name: "ì»¤ë¦¬ë¶€ì–´ìŠ¤íŠ¸", lat: 52.5190, lng: 13.4060, imageUrl: "./image/egg.jpg" }, { name: "ìŠˆë‹ˆì²¼", lat: 52.5210, lng: 13.4070, imageUrl: "./image/egg.jpg" }] }
            ]
        },
        {
            name: "ì´íƒˆë¦¬ì•„",
            cities: [
                { name: "ğŸ• ë¡œë§ˆ", lat: 41.9028, lng: 12.4964, desc: "ê³ ëŒ€ ë¡œë§ˆì˜ ìœ ì ì„ ë§Œë‚  ìˆ˜ ìˆëŠ” ë¡œë§ˆì…ë‹ˆë‹¤.", sights: [{ name: "ì½œë¡œì„¸ì›€", lat: 41.8902, lng: 12.4922, imageUrl: "./image/egg.jpg" }, { name: "í¬ë¡œ ë¡œë§ˆë…¸", lat: 41.8922, lng: 12.4851, imageUrl: "./image/egg.jpg" }], foods: [{ name: "í”¼ì", lat: 41.9030, lng: 12.4970, imageUrl: "./image/egg.jpg" }, { name: "íŒŒìŠ¤íƒ€", lat: 41.9040, lng: 12.4980, imageUrl: "./image/egg.jpg" }] },
                { name: "ğŸ• í”¼ì‚¬", lat: 43.7230, lng: 10.3965, desc: "í”¼ì‚¬ì˜ ì‚¬íƒ‘ìœ¼ë¡œ ìœ ëª…í•œ ë„ì‹œì…ë‹ˆë‹¤.", sights: [{ name: "í”¼ì‚¬ì˜ ì‚¬íƒ‘", lat: 43.7232, lng: 10.3966, imageUrl: "./image/egg.jpg" }], foods: [{ name: "ì ¤ë¼ë˜", lat: 43.7235, lng: 10.3960, imageUrl: "./image/egg.jpg" }] },
                { name: "ğŸ• ë² ë‹ˆìŠ¤", lat: 45.4408, lng: 12.3155, desc: "ë¬¼ì˜ ë„ì‹œ, ë² ë‹ˆìŠ¤ì…ë‹ˆë‹¤.", sights: [{ name: "ì‚° ë§ˆë¥´ì½” ê´‘ì¥", lat: 45.4344, lng: 12.3392, imageUrl: "./image/egg.jpg" }, { name: "ë¦¬ì•Œí†  ë‹¤ë¦¬", lat: 45.4380, lng: 12.3359, imageUrl: "./image/egg.jpg" }], foods: [{ name: "í•´ì‚°ë¬¼ ë¦¬ì†Œí† ", lat: 45.4400, lng: 12.3150, imageUrl: "./image/egg.jpg" }] }
            ]
        },
        {
            name: "ê·¸ë¦¬ìŠ¤",
            cities: [
                { name: "ğŸ›ï¸ ì•„í…Œë„¤", lat: 37.9838, lng: 23.7275, desc: "ì„œì–‘ ë¬¸ëª…ì˜ ë°œìƒì§€, ì•„í…Œë„¤ì…ë‹ˆë‹¤.", sights: [{ name: "ì•„í¬ë¡œí´ë¦¬ìŠ¤", lat: 37.9715, lng: 23.7257, imageUrl: "./image/egg.jpg" }, { name: "íŒŒë¥´í…Œë…¼ ì‹ ì „", lat: 37.9715, lng: 23.7236, imageUrl: "./image/egg.jpg" }], foods: [{ name: "ìˆ˜ë¸”ë¼í‚¤", lat: 37.9830, lng: 23.7280, imageUrl: "./image/egg.jpg" }] },
                { name: "ğŸ›ï¸ ì‚°í† ë¦¬ë‹ˆ", lat: 36.3932, lng: 25.4615, desc: "ì•„ë¦„ë‹¤ìš´ í’ê²½ì˜ ì„¬, ì‚°í† ë¦¬ë‹ˆì…ë‹ˆë‹¤.", sights: [{ name: "ì´ì•„ ë§ˆì„", lat: 36.4600, lng: 25.3750, imageUrl: "./image/egg.jpg" }, { name: "í”¼ë¼ ë§ˆì„", lat: 36.4168, lng: 25.4299, imageUrl: "./image/egg.jpg" }], foods: [{ name: "ë¬¸ì–´êµ¬ì´", lat: 36.3930, lng: 25.4620, imageUrl: "./image/egg.jpg" }] }
            ]
        },
        {
            name: "ì´ì§‘íŠ¸",
            cities: [
                { name: "ğŸ« ì¹´ì´ë¡œ", lat: 30.0444, lng: 31.2357, desc: "ì´ì§‘íŠ¸ì˜ ìˆ˜ë„, ì¹´ì´ë¡œì…ë‹ˆë‹¤.", sights: [{ name: "ê¸°ìì˜ í”¼ë¼ë¯¸ë“œ", lat: 29.9792, lng: 31.1342, imageUrl: "./image/egg.jpg" }, { name: "ì´ì§‘íŠ¸ ë°•ë¬¼ê´€", lat: 30.0478, lng: 31.2361, imageUrl: "./image/egg.jpg" }], foods: [{ name: "ì½”ìƒ¤ë¦¬", lat: 30.0440, lng: 31.2360, imageUrl: "./image/egg.jpg" }] },
                { name: "ğŸ« ë£©ì†Œë¥´", lat: 25.6870, lng: 32.6396, desc: "ê³ ëŒ€ ì´ì§‘íŠ¸ì˜ ìœ ì ì´ ë§ì€ ë£©ì†Œë¥´ì…ë‹ˆë‹¤.", sights: [{ name: "ë£©ì†Œë¥´ ì‹ ì „", lat: 25.6997, lng: 32.6385, imageUrl: "./image/egg.jpg" }, { name: "ì¹´ë¥´ë‚˜í¬ ì‹ ì „", lat: 25.7186, lng: 32.6575, imageUrl: "./image/egg.jpg" }], foods: [{ name: "íƒ€ë©”ì´ì•¼", lat: 25.6875, lng: 32.6390, imageUrl: "./image/egg.jpg" }] },
                { name: "ğŸ« ì•„ìŠ¤ì™„", lat: 24.0889, lng: 32.8998, desc: "ë‚˜ì¼ê°•ì´ ì•„ë¦„ë‹¤ìš´ ì•„ìŠ¤ì™„ì…ë‹ˆë‹¤.", sights: [{ name: "ì•„ìŠ¤ì™„ í•˜ì´ ëŒ", lat: 23.9748, lng: 32.8722, imageUrl: "./image/egg.jpg" }, { name: "ë¯¸ì™„ì„± ì˜¤ë²¨ë¦¬ìŠ¤í¬", lat: 24.0903, lng: 32.8998, imageUrl: "./image/egg.jpg" }], foods: [{ name: "íˆë¹„ìŠ¤ì»¤ìŠ¤ ì°¨", lat: 24.0890, lng: 32.9000, imageUrl: "./image/egg.jpg" }] }
            ]
        }
    ];

    // ë§ˆì»¤ ì•„ì´ì½˜ ì •ì˜ (ìƒëµ)
    const redIcon = L.icon({
        iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png',
        iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34],
        shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png', shadowSize: [41, 41]
    });
    const sightIcon = L.icon({
        iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-green.png',
        iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34],
        shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png', shadowSize: [41, 41]
    });
    const foodIcon = L.icon({
        iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-orange.png',
        iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34],
        shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png', shadowSize: [41, 41]
    });
    const cityMarkerIcon = L.icon({
        iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-blue.png',
        iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34],
        shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png', shadowSize: [41, 41]
    });

    // ë§µ ì´ˆê¸°í™”
    function initMap() {
    if (map) map.remove();
    const bounds = [
        [-90, -180],
        [90, 180]
    ];
    map = L.map('map', {
        maxBounds: bounds,
        maxBoundsViscosity: 0.8,
        minZoom: 3,
        maxZoom: 19,
        zoomControl: false // ì´ ë¶€ë¶„ì„ ì¶”ê°€í•˜ì—¬ í™•ëŒ€/ì¶•ì†Œ ë²„íŠ¼ì„ ì œê±°í•©ë‹ˆë‹¤.
    }).setView([30, 120], 2);
    
    // ì´ì „ì— ìˆë˜ L.control.zoom() ì½”ë“œëŠ” ì‚­ì œí•˜ê±°ë‚˜ ì£¼ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
    // L.control.zoom({ position: 'topright' }).addTo(map); 

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);
    const legend = L.control({ position: 'bottomright' });
    legend.onAdd = function (map) {
        const div = L.DomUtil.create('div', 'info legend');
        div.innerHTML = `<p><b>ë§ˆì»¤ ì •ë³´</b></p><p><i style="background:#337ab7;"></i> ë„ì‹œ</p><p><i style="background:#5cb85c;"></i> ê´€ê´‘ì§€</p><p><i style="background:#f0ad4e;"></i> ë§›ì§‘</p>`;
        return div;
    };
    legend.addTo(map);
}
    
    function resetMapAndUI() {
        allCityMarkers.forEach(marker => map.removeLayer(marker));
        allCityMarkers = [];
        currentDetailMarkers.forEach(marker => map.removeLayer(marker));
        currentDetailMarkers = [];
        selectedCityMarker = null;
        selectedDetailMarker = null;
        selectedDetailListItem = null;
        createAllCityMarkers();
    }
    
    function createAllCityMarkers() {
        data.forEach(country => {
            country.cities.forEach(city => {
                const marker = L.marker([city.lat, city.lng], { icon: cityMarkerIcon }).addTo(map);
                marker.bindPopup(city.name);
                marker.on('click', () => {
                    if (window.innerWidth <= 768) {
                        currentCity = city;
                        showDetails(city);
                        mobileControls.classList.add('open');
                    } else {
                        showCityInfo(city);
                    }
                    map.setView([city.lat, city.lng], 10);
                });
                allCityMarkers.push(marker);
            });
        });
    }

    // ë°ìŠ¤í¬í†± UI ë¡œì§
    function setupDesktopUI() {
        mobileControls.style.display = 'none';
        mobileToggleBtn.style.display = 'none';
        sidebar.style.display = 'flex';
        openSidebar();
        createCountryList();
        resetMapAndUI();
    }
    function createCountryList() {
        countryListDiv.innerHTML = "";
        data.forEach(country => {
            const countryBtn = document.createElement("button");
            countryBtn.className = "country-btn title-btn";
            countryBtn.textContent = country.name;
            countryListDiv.appendChild(countryBtn);
            const cityList = document.createElement("div");
            cityList.className = "city-list";
            country.cities.forEach(city => {
                const cityBtn = document.createElement("button");
                cityBtn.className = "city-btn";
                cityBtn.textContent = city.name;
                cityList.appendChild(cityBtn);
                cityBtn.addEventListener("click", () => {
                    showCityInfo(city);
                    
                    // panTo ëŒ€ì‹  flyToë¥¼ ì‚¬ìš©í•˜ê³ , zoom ë ˆë²¨ì„ 10ìœ¼ë¡œ ì§€ì •í•©ë‹ˆë‹¤.
                    const panOffset = [sidebar.offsetWidth / 2, 0];
                    map.flyTo([city.lat, city.lng], 10, {
                        padding: panOffset,
                    });
                });
            });
            countryListDiv.appendChild(cityList);
            countryBtn.addEventListener("click", () => {
                const isOpen = cityList.style.maxHeight !== "0px" && cityList.style.maxHeight !== "";
                document.querySelectorAll(".city-list").forEach(cl => cl.style.maxHeight = "0");
                if (!isOpen) { cityList.style.maxHeight = cityList.scrollHeight + "px"; }
                description.innerHTML = "";
                countryListDiv.classList.remove("hidden");
                showCountryListBtn.classList.add("hidden");
                resetMapAndUI();
            });
        });
    }
    function showCityInfo(city) {
        currentDetailMarkers.forEach(marker => map.removeLayer(marker));
        currentDetailMarkers = [];
        selectedDetailMarker = null;
        selectedDetailListItem = null;
        const cityMarker = allCityMarkers.find(marker => {
            const latLng = marker.getLatLng();
            return latLng.lat === city.lat && latLng.lng === city.lng;
        });
        if (selectedCityMarker) { selectedCityMarker.setIcon(cityMarkerIcon); }
        if (cityMarker) {
            cityMarker.setIcon(redIcon);
            selectedCityMarker = cityMarker;
        }
        description.innerHTML = "";
        description.classList.remove("hidden");
        countryListDiv.classList.add("hidden");
        showCountryListBtn.classList.remove("hidden");
        const cityTitle = document.createElement("h2");
        cityTitle.textContent = city.name;
        description.appendChild(cityTitle);
        const cityDesc = document.createElement("p");
        cityDesc.textContent = city.desc;
        description.appendChild(cityDesc);
        const sightsTitle = document.createElement("h3");
        sightsTitle.textContent = "ê´€ê´‘ì§€";
        description.appendChild(sightsTitle);
        const sightsList = document.createElement("ul");
        sightsList.id = "sights-list";
        description.appendChild(sightsList);
        city.sights.forEach(item => {
            const listItem = document.createElement("li");
            listItem.textContent = item.name;
            sightsList.appendChild(listItem);
            const marker = L.marker([item.lat, item.lng], { icon: sightIcon }).addTo(map);
            const popupContent = `<div style="text-align: center;"><h4>${item.name}</h4><img src="${item.imageUrl}" alt="${item.name}" style="width:150px; height:auto; border-radius: 5px;"></div>`;
            marker.bindPopup(popupContent);
            marker.originalIcon = sightIcon;
            currentDetailMarkers.push(marker);
            const onClick = () => {
                if (selectedDetailMarker) { selectedDetailMarker.setIcon(selectedDetailMarker.originalIcon); }
                if (selectedDetailListItem) { selectedDetailListItem.classList.remove("active"); }
                marker.setIcon(redIcon);
                marker.openPopup();
                listItem.classList.add("active");
                selectedDetailMarker = marker;
                selectedDetailListItem = listItem;
                
                const panOffset = [sidebar.offsetWidth / 2, 0];
                map.flyTo([item.lat, item.lng], 15, {
                    padding: panOffset,
                });
            };
            listItem.addEventListener("click", onClick);
            marker.on("click", onClick);
        });
        const foodsTitle = document.createElement("h3");
        foodsTitle.textContent = "ë§›ì§‘";
        description.appendChild(foodsTitle);
        const foodsList = document.createElement("ul");
        foodsList.id = "foods-list";
        description.appendChild(foodsList);
        city.foods.forEach(item => {
            const listItem = document.createElement("li");
            listItem.textContent = item.name;
            foodsList.appendChild(listItem);
            const marker = L.marker([item.lat, item.lng], { icon: foodIcon }).addTo(map);
            const popupContent = `<div style="text-align: center;"><h4>${item.name}</h4><img src="${item.imageUrl}" alt="${item.name}" style="width:150px; height:auto; border-radius: 5px;"></div>`;
            marker.bindPopup(popupContent);
            marker.originalIcon = foodIcon;
            currentDetailMarkers.push(marker);
            const onClick = () => {
                if (selectedDetailMarker) { selectedDetailMarker.setIcon(selectedDetailMarker.originalIcon); }
                if (selectedDetailListItem) { selectedDetailListItem.classList.remove("active"); }
                marker.setIcon(redIcon);
                marker.openPopup();
                listItem.classList.add("active");
                selectedDetailMarker = marker;
                selectedDetailListItem = listItem;
                
                const panOffset = [sidebar.offsetWidth / 2, 0];
                map.flyTo([item.lat, item.lng], 15, {
                    padding: panOffset,
                });
            };
            listItem.addEventListener("click", onClick);
            marker.on("click", onClick);
        });
    }

    // ëª¨ë°”ì¼ UI ë¡œì§
    function setupMobileUI() {
        sidebar.style.display = 'none';
        mobileControls.style.display = 'flex';
        mobileControls.classList.add('closed');
        mobileToggleBtn.style.display = 'flex';
        createCountrySlider();
        resetMapAndUI();
    }
    
    function toggleMobileControls() {
        const isOpen = mobileControls.classList.contains('open');
        if (isOpen) {
            mobileControls.classList.remove('open');
            mobileControls.classList.add('closed');
            mobileToggleBtn.textContent = 'â˜°';
        } else {
            mobileControls.classList.remove('closed');
            mobileControls.classList.add('open');
            mobileToggleBtn.textContent = 'âœ–';
        }
    }
    
    function createCountrySlider() {
        currentView = 'countries';
        infoPanel.style.display = 'none';
        backButton.classList.add('hidden');
        countrySlider.innerHTML = "";
        countrySlider.style.display = 'flex';
        
        data.forEach(country => {
            const countryBtn = document.createElement("button");
            countryBtn.className = "country-btn";
            countryBtn.textContent = country.name;
            countrySlider.appendChild(countryBtn);
            countryBtn.addEventListener('click', () => {
                currentCountry = country;
                showCities(country);
            });
        });
    }
    function showCities(country) {
        currentView = 'cities';
        countrySlider.style.display = 'none';
        infoPanel.style.display = 'block';
        backButton.classList.remove('hidden');
        contentList.innerHTML = `<h4 class="title">${country.name}</h4>`;
        
        country.cities.forEach(city => {
            const listItem = document.createElement("li");
            listItem.textContent = city.name;
            contentList.appendChild(listItem);
            listItem.addEventListener('click', () => {
                currentCity = city;
                showDetails(city);
                map.setView([city.lat, city.lng], 10);
            });
        });
        
        currentDetailMarkers.forEach(marker => map.removeLayer(marker));
        currentDetailMarkers = [];

        allCityMarkers.forEach(marker => map.removeLayer(marker));
        allCityMarkers = [];
        country.cities.forEach(city => {
            const marker = L.marker([city.lat, city.lng], { icon: cityMarkerIcon }).addTo(map);
            marker.on('click', () => {
                currentCity = city;
                showDetails(city);
                map.setView([city.lat, city.lng], 10);
            });
            allCityMarkers.push(marker);
        });
    }
 // `showDetails` í•¨ìˆ˜ ìˆ˜ì •
    function showDetails(city) {
        currentView = 'details';
        backButton.classList.remove('hidden');
        contentList.innerHTML = `<h4 class="title">${city.name}</h4><p>${city.desc}</p>`;
        
        // ëª¨ë°”ì¼ UIì—ì„œëŠ” ë„ì‹œ ë§ˆì»¤ë¥¼ ì§€ìš°ëŠ” ëŒ€ì‹ , ê¸°ì¡´ ë§ˆì»¤ë¥¼ ì¬í™œìš©í•˜ì—¬ ì•„ì´ì½˜ì„ ë³€ê²½í•©ë‹ˆë‹¤.
        allCityMarkers.forEach(marker => map.removeLayer(marker));
        allCityMarkers = [];
        
        const allItems = [...city.sights.map(item => ({ ...item, type: 'sight' })), ...city.foods.map(item => ({ ...item, type: 'food' }))];
        
        currentDetailMarkers.forEach(marker => map.removeLayer(marker));
        currentDetailMarkers = [];
        
        // ë„ì‹œ ë§ˆì»¤ ì•„ì´ì½˜ ë³€ê²½ ë¡œì§ì€ ì œê±°í•˜ê³ , ì„¸ë¶€ ì •ë³´ ë§ˆì»¤ë§Œ í‘œì‹œ
        
        allItems.forEach(item => {
            const listItem = document.createElement("li");
            listItem.innerHTML = `<img src="${item.imageUrl || './image/placeholder.png'}" alt="${item.name}" /><span>${item.name}</span>`;
            contentList.appendChild(listItem);
            
            const icon = item.type === 'sight' ? sightIcon : foodIcon;
            const marker = L.marker([item.lat, item.lng], { icon: icon }).addTo(map);

            // ë§ˆì»¤ì— ì´ë¯¸ì§€ì™€ ì •ë³´ë¥¼ ë‹´ì€ íŒì—…ì„ ë°”ì¸ë”©í•©ë‹ˆë‹¤.
            const popupContent = `
                <div style="text-align: center;">
                    <h4>${item.name}</h4>
                    <img src="${item.imageUrl}" alt="${item.name}" style="width: 150px; height: auto; border-radius: 5px;">
                </div>
            `;
            marker.bindPopup(popupContent);
            
            marker.originalIcon = icon;
            currentDetailMarkers.push(marker);
            
            const onClick = () => {
                if (selectedDetailMarker) { selectedDetailMarker.setIcon(selectedDetailMarker.originalIcon); }
                if (selectedDetailListItem) { selectedDetailListItem.classList.remove("active"); }
                
                marker.setIcon(redIcon);
                marker.openPopup();
                listItem.classList.add("active");
                
                selectedDetailMarker = marker;
                selectedDetailListItem = listItem;
                
                map.setView([item.lat, item.lng], 15);
            };
            
            listItem.addEventListener("click", onClick);
            marker.on("click", onClick);
        });
    }

    // ë°ìŠ¤í¬í†± ì‚¬ì´ë“œë°” í† ê¸€ í•¨ìˆ˜
    function closeSidebar() {
	    sidebar.classList.add("closed");
	    mapDiv.classList.add("expanded");
	    openBtn.style.display = 'block';
	    toggleBtn.style.display = 'none';
	}
	function openSidebar() {
	    sidebar.classList.remove("closed");
	    mapDiv.classList.remove("expanded");
	    openBtn.style.display = 'none';
	    toggleBtn.style.display = 'block';
	}
    
    // í™”ë©´ í¬ê¸° ë³€ê²½ ê°ì§€ ë° UI ì´ˆê¸°í™”
    function handleResize() {
        if (window.innerWidth <= 768) {
            setupMobileUI();
        } else {
            setupDesktopUI();
        }
    }

    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    toggleBtn.addEventListener("click", closeSidebar);
    openBtn.addEventListener("click", openSidebar);
    showCountryListBtn.addEventListener("click", () => {
        description.classList.add("hidden");
        countryListDiv.classList.remove("hidden");
        showCountryListBtn.classList.add("hidden");
        resetMapAndUI();
        if (selectedCityMarker) {
            selectedCityMarker.setIcon(cityMarkerIcon);
            selectedCityMarker = null;
        }
    });
    backButton.addEventListener("click", () => {
        if (currentView === 'cities') {
            createCountrySlider();
        } else if (currentView === 'details') {
            showCities(currentCountry);
        }
    });
    
    mobileToggleBtn.addEventListener("click", toggleMobileControls);

    // ì´ˆê¸° ì‹¤í–‰
    initMap();
    handleResize();
    window.addEventListener('resize', handleResize);
</script>
</body>
</html>
