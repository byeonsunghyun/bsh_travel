<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BSH's Travel</title>
  <link rel="icon" href="../image/favicon.png" type="image/png" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="../css/travel_map.css">
</head>
<body>

  <div class="sidebar" id="sidebar">
    <a href="/bsh_travel/main" title="ë©”ì¸ìœ¼ë¡œ ì´ë™">
      <img src="../image/travel_logo.png" alt="BSH Travel Logo" class="logo" />
    </a>
    <div class="country-list" id="countryList"></div>
    <button id="toggleBtn" title="ì‚¬ì´ë“œë°” ë‹«ê¸°">ğŸ¡„</button>
    <div class="description" id="description"></div>
    <button id="showCountryListBtn" class="title-btn hidden">â† ë‚˜ë¼ ëª©ë¡ ë³´ê¸°</button>
  </div>
  <button id="openBtn" title="ì‚¬ì´ë“œë°” ì—´ê¸°">â˜°</button>

  <div class="mobile-controls" id="mobileControls">
    <div class="country-slider-container">
      <div id="country-slider" class="country-slider"></div>
    </div>
    <div id="info-panel" class="info-panel">
      <button id="back-button" class="back-button hidden">â† ë’¤ë¡œê°€ê¸°</button>
      <div id="content-list"></div>
    </div>
  </div>
  <button id="mobileToggleBtn">â˜°</button>
  <a href="/bsh_travel/main" id="mobileHomeBtn" title="ë©”ì¸ìœ¼ë¡œ ì´ë™">ğŸ </a>

  <div id="map"></div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>
    // ì£¼ìš” DOM ìš”ì†Œ
    const sidebar = document.getElementById("sidebar");
    const description = document.getElementById("description");
    const mapDiv = document.getElementById("map");
    const toggleBtn = document.getElementById("toggleBtn");
    const openBtn = document.getElementById("openBtn");
    const countryListDiv = document.getElementById("countryList");
    const showCountryListBtn = document.getElementById("showCountryListBtn");

    const mobileControls = document.getElementById("mobileControls");
    const countrySlider = document.getElementById("country-slider");
    const infoPanel = document.getElementById("info-panel");
    const contentList = document.getElementById("content-list");
    const backButton = document.getElementById("back-button");
    const mobileToggleBtn = document.getElementById("mobileToggleBtn");
    

    let map, allCityMarkers = [], currentDetailMarkers = [], selectedCityMarker = null, selectedDetailMarker = null, selectedDetailListItem = null;
    let currentView = 'countries'; // 'countries', 'cities', 'details'
    let currentCountry = null;
    let currentCity = null;

    // ê³µí†µ ë°ì´í„° (ìƒëµ)
    const data = [
    {
        name: "ì¼ë³¸",
        cities: [
            {
                name: "ğŸ£ í›„ì¿ ì˜¤ì¹´",
                lat: 33.586309,
                lng: 130.376301,
                desc: "ê°€ë³ê²Œ ë– ë‚˜ê¸° ì¢‹ì€ ê°€ê¹Œìš´ ì—¬í–‰ì§€",
                sights: [
                	{
                        name: "ì˜¤í˜¸ë¦¬ ê³µì›",
                        lat: 33.586309,
                        lng: 130.376301,
                        imageUrl: "../image/image_japan05/place6-1.jpg"
                    },
                    {
                        name: "ì¸ ì•¼íƒ€ ì„œì  ë¡¯í°ë§ˆì¸ ",
                        lat: 33.577405,
                        lng: 130.377996,
                        imageUrl: "../image/image_japan05/place7-1.jpg"
                    }
                ],
                foods: [
                    {
                        name: "ä¸€è˜­ æœ¬ç¤¾ç·æœ¬åº— - ì´ì¹˜ë€ ë¼ë©˜ ë³¸ì ",
                        lat: 33.593222,
                        lng: 130.404563,
                        imageUrl: "../image/image_japan05/food3-3.jpg"
                    },
                    {
                        name: "åšå¤šã‚‚ã¤é‹ æœ‹æ¨‚ - ëª¨ì¸ ë‚˜ë² ",
                        lat: 33.588822,
                        lng: 130.421579,
                        imageUrl: "../image/image_japan05/food5-6.jpg"
                    }
                ]
            },
            {
                name: "ğŸ£ ì‹œëª¨ë…¸ì„¸í‚¤",
                lat: 33.9565664,
                lng: 130.9456336,
                desc: "ë°”ë‹·ë°”ëŒ ë§ìœ¼ë©° ì‰¬ê¸° ì¢‹ì€ íë§ ì—¬í–‰ì§€",
                sights: [
                    {
                        name: "ê°€ë¼í† ì‹œì¥",
                        lat: 33.9565664,
                        lng: 130.9456336,
                        imageUrl: "../image/image_japan/place1-4.jpg"
                    },
                    {
                        name: "ëª¨ì§€ì½”",
                        lat: 33.9463622,
                        lng: 130.9586796,
                        imageUrl: "../image/image_japan/place2-4.jpg"
                    },
                    {
                        name: "ì•„ì¹´ë¯¸ì‹ ê¶",
                        lat: 33.959165,
                        lng: 130.948917,
                        imageUrl: "../image/image_japan/place3-1.jpg"
                    },
                    {
                        name: "ì˜êµ­ì˜ì‚¬ê´€",
                        lat: 33.9569074,
                        lng: 130.9430147,
                        imageUrl: "../image/image_japan05/place1-1.jpg"
                    },
                    {
                        name: "ì¹´ëí† ìš”ì½”ìµ¸",
                        lat: 33.953191,
                        lng: 130.941130,
                        imageUrl: "../image/image_japan05/place4-1.jpg"
                    }
                ],
                foods: [
                    {
                    	name: "ãŸã„ã‚€äº­ - ëˆê¹ŒìŠ¤",
                        lat: 33.944987,
                        lng: 130.960499,
                        imageUrl: "../image/image_japan/food8-1.jpg"
                    }
                ]
            },
            {
                name: "ğŸ£ ìœ í›„ì¸",
                lat: 33.266662,
                lng: 131.368931,
                desc: "ì¼ë³¸ ì‹œê³¨ ê°ì„± ê°€ë“í•œ ì—¬í–‰ì§€",
                sights: [
                    {
                        name: "í‚¨ë¦° í˜¸ìˆ˜",
                        lat: 33.266662,
                        lng: 131.368931,
                        imageUrl: "../image/image_japan/place3-1.jpg"
                    }
                ],
                foods: [
                    {
                        name: "ã‚†ã‚‹ã‚Šã‚“ - ì—°ì–´ê¹ŒìŠ¤",
                        lat: 33.2627319,
                        lng: 131.3553187,
                        imageUrl: "../image/image_japan/food3-1.jpg"
                    },
                    {
                        name: "B.Bee's - ë²Œê¿€ ì•„ì´ìŠ¤í¬ë¦¼",
                        lat: 33.266318,
                        lng: 131.3621605,
                        imageUrl: "../image/image_japan/food4-3.jpg"
                    },
                    {
                        name: "æ¹¯å¸ƒé™¢é‡‘è³ã‚³ãƒ­ãƒƒã‚± - ê³ ë¡œì¼“",
                        lat: 33.266494,
                        lng: 131.362538,
                        imageUrl: "../image/image_japan/food5-1.jpg"
                    }
                ]
            },
            {
                name: "ğŸ£ ì´í† ì‹œë§ˆ",
                lat: 33.639210,
                lng: 130.197161,
                desc: "ë°”ë‹¤ì™€ í•¨ê»˜í•˜ëŠ” ê³ ì¦ˆë„‰í•œ ìš´ì¹˜",
                sights: [
                    {
                        name: "ì‚¬ì¿ ë¼ì´ í›„íƒ€ë¯¸ê°€ìš°ë¼",
                        lat: 33.639210,
                        lng: 130.197161,
                        imageUrl: "../image/image_japan05/place8-1.jpg"
                    }
                ],
                foods: [
                    {
                        name: "ç³¸å³¶èŒ¶æˆ¿ - í•«ì¼€ì´í¬",
                        lat: 33.640486,
                        lng: 130.200039,
                        imageUrl: "../image/image_japan05/food4-4.jpg"
                    }
                ]
            },
            
            {
                name: "ğŸ£ ì˜¤ì‚¬ì¹´",
                lat: 34.66891,
                lng: 135.50108,
                desc: "ë³´ê³ , ë¨¹ê³ , ì¦ê¸¸ ê²Œ ë§ì€ ì—¬í–‰ì§€.",
                sights: [
                    {
                        name: "ê¸€ë¦¬ì½”ìƒ",
                        lat: 34.66891,
                        lng: 135.50108,
                        imageUrl: "../image/image_japan08/place1-3.jpg"
                    },
                    {
                        name: "Universal Studios Japan",
                        lat: 34.665509,
                        lng: 135.4327,
                        imageUrl: "../image/image_japan08/place4-1.jpg"
                    },
                    {
                        name: "ì¹´ì´ìœ ì¹¸ ìˆ˜ì¡±ê´€",
                        lat: 34.65445,
                        lng: 135.42890,
                        imageUrl: "../image/image_japan08/place5-1.jpg"
                    },
                    {
                        name: "ì˜¤ë Œì§€ ìŠ¤íŠ¸ë¦¬íŠ¸",
                        lat: 34.67135,
                        lng: 135.48849,
                        imageUrl: "../image/image_japan08/place8-1.jpg"
                    },
                    {
                        name: "ì”ì¹´ë¼",
                        lat: 34.67240,
                        lng: 135.49788,
                        imageUrl: "../image/image_japan08/place9-1.jpg"
                    },
                    {
                        name: "ë´ë´íƒ€ìš´",
                        lat: 34.66042,
                        lng: 135.50588,
                        imageUrl: "../image/image_japan08/place10-2.jpg"
                    },
                    {
                        name: "ìš°ë©”ë‹¤ ìŠ¤ì¹´ì´ë¹Œë”©",
                        lat: 34.70516,
                        lng: 135.48973,
                        imageUrl: "../image/image_japan08/place11-4.jpg"
                    }
                ],
                foods: [
                    {
                    	name: "çœŸã£èµ¤ãªã‚‰ãƒ¼ã‚ã‚“ - í† ë§ˆí†  ë¼ë©˜",
                        lat: 34.69913,
                        lng: 135.49955,
                        imageUrl: "../image/image_japan08/food1-4.jpg"
                    },
                    {
                    	name: "é‡‘é¾ãƒ©ãƒ¼ãƒ¡ãƒ³ - í‚¨ë¥˜ë¼ë©˜",
                        lat: 34.66866,
                        lng: 135.50305,
                        imageUrl: "../image/image_japan08/food2-1.jpg"
                    },
                    {
                    	name: "ä¹å·ã‚‰ãƒ¼ã‚ã‚“äº€ç‹ - ê·œìŠˆë¼ë©˜",
                        lat: 34.66863,
                        lng: 135.49944,
                        imageUrl: "../image/image_japan08/food19-5.jpg"
                    },
                    {
                    	name: "ã ã‚‹ã¾ é“é “å €åº— - ì¿ ì‹œì¹´ì¸ ",
                        lat: 34.66884,
                        lng: 135.50259,
                        imageUrl: "../image/image_japan08/food3-1.jpg"
                    },
                    {
                    	name: "å…ƒç¥–ã‚¢ã‚¤ã‚¹ãƒ‰ãƒƒã‚° - ì•„ì´ìŠ¤ë„ê·¸",
                        lat: 34.47228,
                        lng: 135.49809,
                        imageUrl: "../image/image_japan08/food13-1.jpg"
                    },
                    {
                    	name: "ã‹ã«é“æ¥½ é“é “å € æ±åº— - ê°€ë‹ˆë„ë¼ì¿ ",
                        lat: 34.66886,
                        lng: 135.50593,
                        imageUrl: "../image/image_japan08/food8-1.jpg"
                    },
                    {
                    	name: "é‡£èˆ¹èŒ¶å±‹ã–ã†ãŠé›£æ³¢æœ¬åº— - ììš°ì˜¤",
                        lat: 34.66834,
                        lng: 135.50672,
                        imageUrl: "../image/image_japan08/food10-5.jpg"
                    },
                    {
                    	name: "ã‚¹ã‚·ãƒ­ãƒ¼ é›£æ³¢ã‚¢ãƒ ã‚¶åº— - ì´ˆë°¥",
                        lat: 34.666600,
                        lng: 135.503543,
                        imageUrl: "../image/image_japan08/food10-5.jpg"
                    }
                ]
            },
            {
                name: "ğŸ£ êµí† ",
                lat: 34.99464,
                lng: 135.78466,
                desc: "ì •í†µ ê°ì„±ì´ ë¬»ì–´ë‚˜ëŠ” ê³³",
                sights: [
                    {
                        name: "ê¸°ìš”ë¯¸ì¦ˆë°ë¼",
                        lat: 34.99464,
                        lng: 135.78466,
                        imageUrl: "../image/image_japan08/place7-8.jpg"
                    }
                ],
                foods: [
                    {
                    	name: "äº¬éƒ½è²´èˆ¹ æ–™ç†æ—…é¤¨ ã²ã‚æ–‡ - ë‚˜ê°€ì‹œì†Œë©˜",
                        lat: 35.12525,
                        lng: 135.76397,
                        imageUrl: "../image/image_japan08/food9-4.jpg"
                    }
                ]
            },
            {
                name: "ğŸ£ ë‚˜ë¼",
                lat: 34.684826,
                lng: 135.84302,
                desc: "ì‚¬ìŠ´ì´ ë°˜ê²¨ì£¼ëŠ” ì—¬í–‰ì§€",
                sights: [
                    {
                        name: "ë‚˜ë¼ ê³µì›",
                        lat: 34.684826,
                        lng: 135.84302,
                        imageUrl: "../image/image_japan08/place3-1.jpg"
                    },
                    {
                        name: "ë‚˜ë¼ ì¶•ì œ",
                        lat: 34.68689,
                        lng: 135.79415,
                        imageUrl: "../image/image_japan08/place6-3.jpg"
                    }
                ],
                foods: [
                	{
                    	name: "é¤ƒå­ã®ç‹å°† å¿ƒæ–æ©‹åº— - êµì",
                        lat: 34.67347,
                        lng: 135.50168,
                        imageUrl: "../image/image_japan08/food4-1.jpg"
                    }
                ]
            },
            {
                name: "ğŸ£ ê³ ë² ",
                lat: 34.57502,
                lng: 135.00066,
                desc: "ê³ ìš”í•˜ì§€ë§Œ ì„¸ë ¨ëœ ë„ì‹œì˜ ê²°",
                sights: [
                    {
                        name: "ë‹ˆì§€ê²ë…¸ëª¨ë¦¬",
                        lat: 34.57502,
                        lng: 135.00066,
                        imageUrl: "../image/image_japan08/place12-7.jpg"
                    },
                    {
                        name: "í•˜ë²„ëœë“œ",
                        lat: 34.68008,
                        lng: 135.18352,
                        imageUrl: "../image/image_japan08/place13-7.jpg"
                    },
                    {
                        name: "ë‚œí‚¨ë§ˆì¹˜",
                        lat: 34.68821,
                        lng: 135.18811,
                        imageUrl: "../image/image_japan08/place13-11.jpg"
                    }
                ],
                foods: [
                	{
                        name: "äº¬å±‹å…ƒç”ºæœ¬åº— - ìš°ë™",
                        lat: 34.68870,
                        lng: 135.18814,
                        imageUrl: "../image/image_japan08/food21-1.jpg"
                    }
                ]
            }
        ]
    },
    {
        name: "ì¤‘êµ­",
        cities: [
            {
                name: "ğŸ¼ ë² ì´ì§•",
                lat: 39.88224,
                lng: 116.40652,
                desc: "ì›…ì¥í•¨ê³¼ ê±°ëŒ€í•¨",
                sights: [
                	{
                        name: "å¤©å›å…¬å›­ - ì²œë‹¨ê³µì›",
                        lat: 39.88224,
                        lng: 116.40652,
                        imageUrl: "../image/image_country24/place1-3.jpg"
                    },
                    {
                        name: "ç‹åºœäº•å¤§è¡— - ì™•í‘¸ì§• ê±°ë¦¬",
                        lat: 39.91592,
                        lng: 116.41117,
                        imageUrl: "../image/image_country24/place2-1.jpg"
                    },
                    {
                        name: "å…«è¾¾å²­é•¿åŸ - íŒ”ë‹¬ë ¹ì¥ì„±",
                        lat: 40.35946,
                        lng: 115.98704,
                        imageUrl: "../image/image_country24/place3-6.jpg"
                    },
                    {
                        name: "é¢å’Œå›­ - ì´í™”ì›",
                        lat: 39.99993,
                        lng: 116.27547,
                        imageUrl: "../image/image_country24/place4-3.jpg"
                    },
                    {
                        name: "å¤©å®‰é—¨ - ì²œì•ˆë¬¸",
                        lat: 39.90874,
                        lng: 116.39769,
                        imageUrl: "../image/image_country24/place5-3.jpg"
                    },
                    {
                        name: "Universal Beijing Resort",
                        lat: 39.85319,
                        lng: 116.66055,
                        imageUrl: "../image/image_country24/place6-1.jpg"
                    },
                    {
                        name: "ç´«ç¦åŸ - ìê¸ˆì„±",
                        lat: 39.91751,
                        lng: 116.39706,
                        imageUrl: "../image/image_country24/place7-3.jpg"
                    },
                    {
                        name: "æ™¯å±±å…¬å›­ - ê²½ì‚°ê³µì›",
                        lat: 39.92505,
                        lng: 116.39668,
                        imageUrl: "../image/image_country24/place8-3.jpg"
                    },
                    {
                        name: "ë² ì´ì§• ë™ë¬¼ì›",
                        lat: 39.93886,
                        lng: 116.33953,
                        imageUrl: "../image/image_country24/place9-2.jpg"
                    },
                    {
                        name: "ì „ë¬¸ëŒ€ê°€",
                        lat: 39.89355,
                        lng: 116.39830,
                        imageUrl: "../image/image_country24/place10-2.jpg"
                    }
                ],
                foods: [
                    {
                    	name: "æ–¹ç –å‚69å·ç‚¸é…±é¢(ç‹åºœä¸–çºªåº—)",
                        lat: 39.93821,
                        lng: 116.39774,
                        imageUrl: "../image/image_country24/food1-1.jpg"
                    },
                    {
                    	name: "å—åŸé¦™ - í› ê¶ˆ",
                        lat: 39.93310,
                        lng: 116.40504,
                        imageUrl: "../image/image_country24/food3-4.jpg"
                    },
                    {
                    	name: "å¾ˆä¹…ä»¥å‰ç¾Šè‚‰ä¸² - ì–‘ê¼¬ì¹˜",
                        lat: 39.91508,
                        lng: 116.40815,
                        imageUrl: "../image/image_country24/food7-2.jpg"
                    },
                    {
                    	name: "å¥½å¼€å¿ƒçƒ§é¥¼é‡Œè„Š",
                        lat: 39.92193,
                        lng: 116.40629,
                        imageUrl: "../image/image_country24/food8-3.jpg"
                    },
                    {
                    	name: "å¤–å©†å®¶ - ë™íŒŒìœ¡",
                        lat: 39.91542,
                        lng: 116.41182,
                        imageUrl: "../image/image_country24/food10-1.jpg"
                    }
                ]
            },
            {
                name: "ğŸ¼ ìƒí•˜ì´",
                lat: 31.239220,
                lng: 121.479499,
                desc: "í™”ë ¤í•˜ê³  ì•„ë¦„ë‹¤ìš´ ì•¼ê²½",
                sights: [
                	{
                        name: "ë‚œì§•ë™ë£¨",
                        lat: 31.239220,
                        lng: 121.479499,
                        imageUrl: "../image/image_shanghai/place1-1.jpg"
                    },
                    {
                        name: "ì‹ ì²œì§€",
                        lat: 31.21860,
                        lng: 121.47533,
                        imageUrl: "../image/image_shanghai/place2-1.jpg"
                    },
                    {
                        name: "ëŒ€í•œë¯¼êµ­ ì„ì‹œì •ë¶€",
                        lat: 31.21730,
                        lng: 121.47464,
                        imageUrl: "../image/image_shanghai/place4-1.jpg"
                    },
                    {
                        name: "í‹°ì—”ì¦ˆíŒ¡",
                        lat: 31.20882,
                        lng: 121.46888,
                        imageUrl: "../image/image_shanghai/place5-2.jpg"
                    },
                    {
                        name: "ì˜ˆì›",
                        lat: 31.22735,
                        lng: 121.49208,
                        imageUrl: "../image/image_shanghai/place6-1.jpg"
                    },
                    {
                        name: "ì£¼ê°€ê°",
                        lat: 31.10410,
                        lng: 121.04568,
                        imageUrl: "../image/image_shanghai/place7-1.jpg"
                    },
                    {
                        name: "ë§ˆì‹œì²­ ì„œì»¤ìŠ¤",
                        lat: 31.30651,
                        lng: 121.44789,
                        imageUrl: "../image/image_shanghai/place9-2.jpg"
                    },
                    {
                        name: "ì™€ì´íƒ„",
                        lat: 31.24016,
                        lng: 121.49057,
                        imageUrl: "../image/image_shanghai/place11-1.jpg"
                    },
                    {
                        name: "ë™ë°©ëª…ì£¼",
                        lat: 31.23971,
                        lng: 121.49977,
                        imageUrl: "../image/image_shanghai/place12-1.jpg"
                    }
                ],
                foods: [
                    {
                        name: "æ–°ç™½é¹¿",
                        lat: 31.243159,
                        lng: 121.475176,
                        imageUrl: "../image/image_shanghai/food7-1.jpg"
                    },
                    {
                        name: "ä¸Šæµ·å§¥å§¥å®¶å¸¸é¥­é¦†",
                        lat: 31.23746,
                        lng: 121.48463,
                        imageUrl: "../image/image_shanghai/food8-1.jpg"
                    },
                    {
                        name: "å°æ¨ç”Ÿç…",
                        lat: 31.234697,
                        lng: 121.475269,
                        imageUrl: "../image/image_shanghai/food9-5.jpg"
                    }
                ]
            },
            {
                name: "ğŸ¼ ê´‘ì €ìš°",
                lat: 23.10969,
                lng: 113.23937,
                desc: "ë˜ í•˜ë‚˜ì˜ ë‚´ ì§‘ ê°™ì€ ê³³",
                sights: [
                	{
                        name: "é¡ºå³°å±±å…¬å›­ - ìˆœë´‰ì‚°ê³µì›",
                        lat: 22.83080,
                        lng: 113.27125,
                        imageUrl: "../image/image_chinahome/place1-1.jpg"
                    },
                    {
                        name: "æ²™é¢å³¶ - ìƒ¤ë©˜ë‹¤ì˜¤",
                        lat: 23.10969,
                        lng: 113.23937,
                        imageUrl: "../image/image_chinahome/place2-5.jpg"
                    },
                    {
                        name: "åŒ—äº¬è·¯æ­¥è¡Œè¡—",
                        lat: 23.12730,
                        lng: 113.26361,
                        imageUrl: "../image/image_chinahome/place3-2.jpg"
                    },
                    {
                    	name: "ä½›å±±å²­å—å¤©åœ°",
                        lat: 23.032525,
                        lng: 113.110900,
                        imageUrl: "../image/image_chinahome/place4-1.jpg"
                    },
                    {
                    	name: "å¹¿å·ä¸œå‡ºå£",
                        lat: 22.67837,
                        lng: 113.59035,
                        imageUrl: "../image/image_chinahome/place5-2.jpg"
                    },
                    {
                    	name: "å’Œç¾è¡“é¦†",
                        lat: 22.935606,
                        lng: 113.214701,
                        imageUrl: "../image/image_chinahome/place7-1.jpg"
                    }
                ],
                foods: [
                    {
                    	name: "æµ·åº•æç«é”…",
                        lat: 22.97365,
                        lng: 113.29765,
                        imageUrl: "../image/image_chinahome/food1-1.jpg"
                    }
                ]
            }
        ]
    },
    {
        name: "ëŒ€ë§Œ",
        cities: [
            {
                name: "ğŸ® íƒ€ì´ë² ì´",
                lat: 25.04290,
                lng: 121.50577,
                desc: "ì•¼ì‹œì¥, ë¨¹ê±°ë¦¬ì™€ ì‚¬ëŒë“¤ë¡œ ê°€ë“",
                sights: [
                	{
                        name: "ì‹œë¨¼ë”©",
                        lat: 25.04290,
                        lng: 121.50577,
                        imageUrl: "../image/image_taiwan/place1-1.jpg"
                    },
                    {
                        name: "ìŠ¤ë¦° ì•¼ì‹œì¥",
                        lat: 25.08852,
                        lng: 121.52431,
                        imageUrl: "../image/image_taiwan/place2-1.jpg"
                    },
                    {
                        name: "ìŠ¤í€",
                        lat: 25.04110,
                        lng: 121.77506,
                        imageUrl: "../image/image_taiwan/place3-1.jpg"
                    },
                    {
                        name: "ì§€ìš°í€",
                        lat: 25.10910,
                        lng: 121.84627,
                        imageUrl: "../image/image_taiwan/place4-4.jpg"
                    },
                    {
                        name: "ë‹ìƒ¤ ì•¼ì‹œì¥",
                        lat: 25.05658,
                        lng: 121.51527,
                        imageUrl: "../image/image_taiwan/place5-1.jpg"
                    },
                    {
                        name: "í™”ì‚°1914",
                        lat: 25.04409,
                        lng: 121.52936,
                        imageUrl: "../image/image_taiwan/place6-1.jpg"
                    }
                ],
                foods: [
                    {
                    	name: "é˜¿å®—éºµç·š - ê³±ì°½êµ­ìˆ˜",
                        lat: 25.04330,
                        lng: 121.50769,
                        imageUrl: "../image/image_taiwan/food1-2.jpg"
                    },
                    {
                    	name: "å¹¸ç¦å ‚",
                        lat: 25.04337,
                        lng: 121.50730,
                        imageUrl: "../image/image_taiwan/food2-1.jpg"
                    },
                    {
                    	name: "æ˜¥æ°´å ‚",
                        lat: 25.04419,
                        lng: 121.52933,
                        imageUrl: "../image/image_taiwan/food13-1.jpg"
                    }
                ]
            }
        ]
    },
    {
        name: "ë² íŠ¸ë‚¨",
        cities: [
            {
                name: "ğŸŒ¾ í•˜ë…¸ì´",
                lat: 21.03075,
                lng: 105.85242,
                desc: "ìŒ€êµ­ìˆ˜ í–¥ì´ í¼ì§€ëŠ” ì˜¤ë˜ëœ ê³¨ëª©ë“¤",
                sights: [
                	{
                        name: "í˜¸ì•”ë¼ì—  í˜¸ìˆ˜ & ë…¹ì† ì‚¬ì›",
                        lat: 21.03075,
                        lng: 105.85242,
                        imageUrl: "../image/image_vietnam/place1-2.jpg"
                    },
                    {
                        name: "ëª»ê¼¿ ì‚¬ì› & ë°”ë”˜ ê´‘ì¥",
                        lat: 21.03691,
                        lng: 105.83463,
                        imageUrl: "../image/image_vietnam/place6-5.jpg"
                    },
                    {
                        name: "ê¸°ì°»ê¸¸ ì¹´í˜",
                        lat: 21.03037,
                        lng: 105.84433,
                        imageUrl: "../image/image_vietnam/place7-2.jpg"
                    },
                    {
                        name: "ì„± ìš”ì…‰ ëŒ€ì„±ë‹¹",
                        lat: 21.02877,
                        lng: 105.84886,
                        imageUrl: "../image/image_vietnam/place8-1.jpg"
                    },
                    {
                        name: "íƒ•ë¡± ìˆ˜ìƒì¸í˜•ê·¹ì¥",
                        lat: 21.03171,
                        lng: 105.85334,
                        imageUrl: "../image/image_vietnam/place9-2.jpg"
                    },
                    {
                        name: "ë™ì‘¤ì–¸ ì‹œì¥",
                        lat: 21.03824,
                        lng: 105.85001,
                        imageUrl: "../image/image_vietnam/place10-1.jpg"
                    }
                ],
                foods: [
                    {
                    	name: "Báº¿p Viá»‡t",
                        lat: 21.03052,
                        lng: 105.85055,
                        imageUrl: "../image/image_vietnam/food1-1.jpg"
                    },
                    {
                    	name: "Ngá»t - ì¼€ì´í¬",
                        lat: 21.02907,
                        lng: 105.84443,
                        imageUrl: "../image/image_vietnam/food2-2.jpg"
                    },
                    {
                    	name: "Drop In Cafe - ì½”ì½”ë„› ì»¤í”¼",
                        lat: 21.03127,
                        lng: 105.84514,
                        imageUrl: "../image/image_vietnam/food13-1.jpg"
                    },
                    {
                    	name: "BÃºn cháº£ HÆ°Æ¡ng LiÃªn",
                        lat: 21.01809,
                        lng: 105.85393,
                        imageUrl: "../image/image_vietnam/food10-2.jpg"
                    },
                    {
                    	name: "Bun Cha Dac Kim",
                        lat: 21.03229,
                        lng: 105.84822,
                        imageUrl: "../image/image_vietnam/food14-1.jpg"
                    },
                    {
                    	name: "Quan An Ngon - ë°˜ì„ì˜¤",
                        lat: 21.02637,
                        lng: 105.84334,
                        imageUrl: "../image/image_vietnam/food16-1.jpg"
                    },
                    {
                    	name: "BÃ¡nh cuá»‘n BÃ  XuÃ¢n - ë°˜ ê¾¸ì˜¨",
                        lat: 21.04222,
                        lng: 105.84780,
                        imageUrl: "../image/image_vietnam/food15-1.jpg"
                    }
                ]
            },
            {
                name: "ğŸŒ¾ ì‚¬íŒŒ",
                lat: 22.33112,
                lng: 103.83402,
                desc: "ìì—°ì´ ì–´ìš°ëŸ¬ì§„ íë§ ì—¬í–‰ì§€",
                sights: [
                	{
                        name: "ê¹Ÿê¹Ÿë§ˆì„",
                        lat: 22.33112,
                        lng: 103.83402,
                        imageUrl: "../image/image_vietnam/place2-1.jpg"
                    },
                    {
                        name: "íŒì‹œíŒ",
                        lat: 22.30357,
                        lng: 103.77489,
                        imageUrl: "../image/image_vietnam/place3-4.jpg"
                    },
                    {
                        name: "ì‚¬íŒŒ í˜¸ìˆ˜",
                        lat: 22.33830,
                        lng: 103.84621,
                        imageUrl: "../image/image_vietnam/place4-1.jpg"
                    },
                    {
                        name: "ì‚¬íŒŒ ì•¼ì‹œì¥",
                        lat: 22.33857,
                        lng: 103.85156,
                        imageUrl: "../image/image_vietnam/place5-1.jpg"
                    }
                ],
                foods: [
                	{
                    	name: "Cong Coffee",
                        lat: 22.33626,
                        lng: 103.84306,
                        imageUrl: "../image/image_vietnam/food5-1.jpg"
                    },
                    {
                    	name: "Hotel Sapa Square , Affiliated by MeliÃ¡ - ì–‘ì‹",
                        lat: 22.33481,
                        lng: 103.84115,
                        imageUrl: "../image/image_vietnam/food6-4.jpg"
                    },
                    {
                    	name: "Good Morning View Restaurant - ì½”ì½”ë„› ì¹´ë ˆ",
                        lat: 22.33010,
                        lng: 103.84592,
                        imageUrl: "../image/image_vietnam/food7-1.jpg"
                    },
                    {
                    	name: "THE MIST SAPA",
                        lat: 22.33562,
                        lng: 103.83820,
                        imageUrl: "../image/image_vietnam/food8-1.jpg"
                    }
                ]
            }
        ]
    },
    {
        name: "í•„ë¦¬í•€",
        cities: [
            {
                name: "ğŸŒŠ ì„¸ë¶€",
                lat: 10.30431,
                lng: 123.90565,
                desc: "ì¤€ë¹„ì¤‘",
                sights: [
                	{
                        name: "ì¤€ë¹„ì¤‘",
                        lat: 10.30431,
                        lng: 123.90565,
                        imageUrl: "../image/travel_ready.png"
                    }
                ],
                foods: [
                    {
                    	name: "ì¤€ë¹„ì¤‘",
                        lat: 10.30431,
                        lng: 123.90565,
                        imageUrl: "../image/travel_ready.png"
                    }
                ]
            }
        ]
    },
    {
        name: "íƒœêµ­",
        cities: [
            {
                name: "ğŸ›• ë°©ì½•",
                lat: 13.75975,
                lng: 100.51580,
                desc: "ì¤€ë¹„ì¤‘",
                sights: [
                	{
                        name: "ì¤€ë¹„ì¤‘",
                        lat: 13.75975,
                        lng: 100.51580,
                        imageUrl: "../image/travel_ready.png"
                    }
                ],
                foods: [
                    {
                    	name: "ì¤€ë¹„ì¤‘",
                        lat: 13.75975,
                        lng: 100.51580,
                        imageUrl: "../image/travel_ready.png"
                    }
                ]
            }
        ]
    },
    {
        name: "ë§ë ˆì´ì‹œì•„",
        cities: [
            {
                name: "ğŸ’ ì¿ ì•Œë¼ë£¸í‘¸ë¥´",
                lat: 13.75975,
                lng: 100.51580,
                desc: "ì¤€ë¹„ì¤‘",
                sights: [
                	{
                        name: "ì¤€ë¹„ì¤‘",
                        lat: 13.75975,
                        lng: 100.51580,
                        imageUrl: "../image/travel_ready.png"
                    }
                ],
                foods: [
                    {
                    	name: "ì¤€ë¹„ì¤‘",
                        lat: 13.75975,
                        lng: 100.51580,
                        imageUrl: "../image/travel_ready.png"
                    }
                ]
            }
        ]
    }
    
];


    // ë§ˆì»¤ ì•„ì´ì½˜ ì •ì˜ (ìƒëµ)
    const redIcon = L.icon({
        iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png',
        iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34],
        shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png', shadowSize: [41, 41]
    });
    const sightIcon = L.icon({
        iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-green.png',
        iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34],
        shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png', shadowSize: [41, 41]
    });
    const foodIcon = L.icon({
        iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-orange.png',
        iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34],
        shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png', shadowSize: [41, 41]
    });
    const cityMarkerIcon = L.icon({
        iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-blue.png',
        iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34],
        shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png', shadowSize: [41, 41]
    });

    // ë§µ ì´ˆê¸°í™”
    function initMap() {
    if (map) map.remove();
    const bounds = [
        [-90, -180],
        [90, 180]
    ];
    map = L.map('map', {
        maxBounds: bounds,
        maxBoundsViscosity: 0.8,
        minZoom: 3,
        maxZoom: 19,
        zoomControl: false // ì´ ë¶€ë¶„ì„ ì¶”ê°€í•˜ì—¬ í™•ëŒ€/ì¶•ì†Œ ë²„íŠ¼ì„ ì œê±°í•©ë‹ˆë‹¤.
    }).setView([30, 120], 2);
    
    // ì´ì „ì— ìˆë˜ L.control.zoom() ì½”ë“œëŠ” ì‚­ì œí•˜ê±°ë‚˜ ì£¼ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
    // L.control.zoom({ position: 'topright' }).addTo(map); 

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);
    const legend = L.control({ position: 'bottomright' });
    legend.onAdd = function (map) {
        const div = L.DomUtil.create('div', 'info legend');
        div.innerHTML = `<p><b>ë§ˆì»¤ ì •ë³´</b></p><p><i style="background:#337ab7;"></i> ë„ì‹œ</p><p><i style="background:#5cb85c;"></i> ê´€ê´‘ì§€</p><p><i style="background:#f0ad4e;"></i> ë§›ì§‘</p>`;
        return div;
    };
    legend.addTo(map);
}
    
    function resetMapAndUI() {
        allCityMarkers.forEach(marker => map.removeLayer(marker));
        allCityMarkers = [];
        currentDetailMarkers.forEach(marker => map.removeLayer(marker));
        currentDetailMarkers = [];
        selectedCityMarker = null;
        selectedDetailMarker = null;
        selectedDetailListItem = null;
        createAllCityMarkers();
    }
    
    function createAllCityMarkers() {
        data.forEach(country => {
            country.cities.forEach(city => {
                const marker = L.marker([city.lat, city.lng], { icon: cityMarkerIcon }).addTo(map);
                marker.bindPopup(city.name);
                marker.on('click', () => {
                    if (window.innerWidth <= 768) {
                        currentCity = city;
                        showDetails(city);
                        mobileControls.classList.add('open');
                    } else {
                        showCityInfo(city);
                    }
                    map.setView([city.lat, city.lng], 10);
                });
                allCityMarkers.push(marker);
            });
        });
    }

    // ë°ìŠ¤í¬í†± UI ë¡œì§
    function setupDesktopUI() {
        mobileControls.style.display = 'none';
        mobileToggleBtn.style.display = 'none';
        sidebar.style.display = 'flex';
        openSidebar();
        createCountryList();
        resetMapAndUI();
    }
    function createCountryList() {
        countryListDiv.innerHTML = "";
        data.forEach(country => {
            const countryBtn = document.createElement("button");
            countryBtn.className = "country-btn title-btn";
            countryBtn.textContent = country.name;
            countryListDiv.appendChild(countryBtn);
            const cityList = document.createElement("div");
            cityList.className = "city-list";
            country.cities.forEach(city => {
                const cityBtn = document.createElement("button");
                cityBtn.className = "city-btn";
                cityBtn.textContent = city.name;
                cityList.appendChild(cityBtn);
                cityBtn.addEventListener("click", () => {
                    showCityInfo(city);
                    
                    // panTo ëŒ€ì‹  flyToë¥¼ ì‚¬ìš©í•˜ê³ , zoom ë ˆë²¨ì„ 10ìœ¼ë¡œ ì§€ì •í•©ë‹ˆë‹¤.
                    const panOffset = [sidebar.offsetWidth / 2, 0];
                    map.flyTo([city.lat, city.lng], 10, {
                        padding: panOffset,
                    });
                });
            });
            countryListDiv.appendChild(cityList);
            countryBtn.addEventListener("click", () => {
                const isOpen = cityList.style.maxHeight !== "0px" && cityList.style.maxHeight !== "";
                document.querySelectorAll(".city-list").forEach(cl => cl.style.maxHeight = "0");
                if (!isOpen) { cityList.style.maxHeight = cityList.scrollHeight + "px"; }
                description.innerHTML = "";
                countryListDiv.classList.remove("hidden");
                showCountryListBtn.classList.add("hidden");
                resetMapAndUI();
            });
        });
    }
    function showCityInfo(city) {
        currentDetailMarkers.forEach(marker => map.removeLayer(marker));
        currentDetailMarkers = [];
        selectedDetailMarker = null;
        selectedDetailListItem = null;
        const cityMarker = allCityMarkers.find(marker => {
            const latLng = marker.getLatLng();
            return latLng.lat === city.lat && latLng.lng === city.lng;
        });
        if (selectedCityMarker) { selectedCityMarker.setIcon(cityMarkerIcon); }
        if (cityMarker) {
            cityMarker.setIcon(redIcon);
            selectedCityMarker = cityMarker;
        }
        description.innerHTML = "";
        description.classList.remove("hidden");
        countryListDiv.classList.add("hidden");
        showCountryListBtn.classList.remove("hidden");
        const cityTitle = document.createElement("h2");
        cityTitle.textContent = city.name;
        description.appendChild(cityTitle);
        const cityDesc = document.createElement("p");
        cityDesc.textContent = city.desc;
        description.appendChild(cityDesc);
        const sightsTitle = document.createElement("h3");
        sightsTitle.textContent = "ğŸ—¼ ê´€ê´‘ì§€";
        description.appendChild(sightsTitle);
        const sightsList = document.createElement("ul");
        sightsList.id = "sights-list";
        description.appendChild(sightsList);
        city.sights.forEach(item => {
            const listItem = document.createElement("li");
            listItem.textContent = item.name;
            sightsList.appendChild(listItem);
            const marker = L.marker([item.lat, item.lng], { icon: sightIcon }).addTo(map);
            const popupContent = `<div style="text-align: center;"><h4>${item.name}</h4><img src="${item.imageUrl}" alt="${item.name}" style="width:150px; height:auto; border-radius: 5px;"></div>`;
            marker.bindPopup(popupContent);
            marker.originalIcon = sightIcon;
            currentDetailMarkers.push(marker);
            const onClick = () => {
                if (selectedDetailMarker) { selectedDetailMarker.setIcon(selectedDetailMarker.originalIcon); }
                if (selectedDetailListItem) { selectedDetailListItem.classList.remove("active"); }
                marker.setIcon(redIcon);
                marker.openPopup();
                listItem.classList.add("active");
                selectedDetailMarker = marker;
                selectedDetailListItem = listItem;
                
                const panOffset = [sidebar.offsetWidth / 2, 0];
                map.flyTo([item.lat, item.lng], 15, {
                    padding: panOffset,
                });
            };
            listItem.addEventListener("click", onClick);
            marker.on("click", onClick);
        });
        const foodsTitle = document.createElement("h3");
        foodsTitle.textContent = "ğŸ½ï¸ ë§›ì§‘";
        description.appendChild(foodsTitle);
        const foodsList = document.createElement("ul");
        foodsList.id = "foods-list";
        description.appendChild(foodsList);
        city.foods.forEach(item => {
            const listItem = document.createElement("li");
            listItem.textContent = item.name;
            foodsList.appendChild(listItem);
            const marker = L.marker([item.lat, item.lng], { icon: foodIcon }).addTo(map);
            const popupContent = `<div style="text-align: center;"><h4>${item.name}</h4><img src="${item.imageUrl}" alt="${item.name}" style="width:150px; height:auto; border-radius: 5px;"></div>`;
            marker.bindPopup(popupContent);
            marker.originalIcon = foodIcon;
            currentDetailMarkers.push(marker);
            const onClick = () => {
                if (selectedDetailMarker) { selectedDetailMarker.setIcon(selectedDetailMarker.originalIcon); }
                if (selectedDetailListItem) { selectedDetailListItem.classList.remove("active"); }
                marker.setIcon(redIcon);
                marker.openPopup();
                listItem.classList.add("active");
                selectedDetailMarker = marker;
                selectedDetailListItem = listItem;
                
                const panOffset = [sidebar.offsetWidth / 2, 0];
                map.flyTo([item.lat, item.lng], 15, {
                    padding: panOffset,
                });
            };
            listItem.addEventListener("click", onClick);
            marker.on("click", onClick);
        });
    }

    // ëª¨ë°”ì¼ UI ë¡œì§
    function setupMobileUI() {
        sidebar.style.display = 'none';
        mobileControls.style.display = 'flex';
        mobileControls.classList.add('closed');
        mobileToggleBtn.style.display = 'flex';
        createCountrySlider();
        resetMapAndUI();
    }
    
    function toggleMobileControls() {
        const isOpen = mobileControls.classList.contains('open');
        if (isOpen) {
            mobileControls.classList.remove('open');
            mobileControls.classList.add('closed');
            mobileToggleBtn.textContent = 'â˜°';
        } else {
            mobileControls.classList.remove('closed');
            mobileControls.classList.add('open');
            mobileToggleBtn.textContent = 'âœ–';
        }
    }
    
    function createCountrySlider() {
        currentView = 'countries';
        infoPanel.style.display = 'none';
        backButton.classList.add('hidden');
        countrySlider.innerHTML = "";
        countrySlider.style.display = 'flex';
        
        data.forEach(country => {
            const countryBtn = document.createElement("button");
            countryBtn.className = "country-btn";
            countryBtn.textContent = country.name;
            countrySlider.appendChild(countryBtn);
            countryBtn.addEventListener('click', () => {
                currentCountry = country;
                showCities(country);
            });
        });
    }
    function showCities(country) {
        currentView = 'cities';
        countrySlider.style.display = 'none';
        infoPanel.style.display = 'block';
        backButton.classList.remove('hidden');
        contentList.innerHTML = `<h4 class="title">${country.name}</h4>`;
        
        country.cities.forEach(city => {
            const listItem = document.createElement("li");
            listItem.textContent = city.name;
            contentList.appendChild(listItem);
            listItem.addEventListener('click', () => {
                currentCity = city;
                showDetails(city);
                map.setView([city.lat, city.lng], 10);
            });
        });
        
        currentDetailMarkers.forEach(marker => map.removeLayer(marker));
        currentDetailMarkers = [];

        allCityMarkers.forEach(marker => map.removeLayer(marker));
        allCityMarkers = [];
        country.cities.forEach(city => {
            const marker = L.marker([city.lat, city.lng], { icon: cityMarkerIcon }).addTo(map);
            marker.on('click', () => {
                currentCity = city;
                showDetails(city);
                map.setView([city.lat, city.lng], 10);
            });
            allCityMarkers.push(marker);
        });
    }
 // `showDetails` í•¨ìˆ˜ ìˆ˜ì •
    function showDetails(city) {
        currentView = 'details';
        backButton.classList.remove('hidden');
        contentList.innerHTML = `<h4 class="title">${city.name}</h4><p>${city.desc}</p>`;
        
        // ëª¨ë°”ì¼ UIì—ì„œëŠ” ë„ì‹œ ë§ˆì»¤ë¥¼ ì§€ìš°ëŠ” ëŒ€ì‹ , ê¸°ì¡´ ë§ˆì»¤ë¥¼ ì¬í™œìš©í•˜ì—¬ ì•„ì´ì½˜ì„ ë³€ê²½í•©ë‹ˆë‹¤.
        allCityMarkers.forEach(marker => map.removeLayer(marker));
        allCityMarkers = [];
        
        const allItems = [...city.sights.map(item => ({ ...item, type: 'sight' })), ...city.foods.map(item => ({ ...item, type: 'food' }))];
        
        currentDetailMarkers.forEach(marker => map.removeLayer(marker));
        currentDetailMarkers = [];
        
        // ë„ì‹œ ë§ˆì»¤ ì•„ì´ì½˜ ë³€ê²½ ë¡œì§ì€ ì œê±°í•˜ê³ , ì„¸ë¶€ ì •ë³´ ë§ˆì»¤ë§Œ í‘œì‹œ
        
        allItems.forEach(item => {
            const listItem = document.createElement("li");
            listItem.innerHTML = `<img src="${item.imageUrl || './image/placeholder.png'}" alt="${item.name}" /><span>${item.name}</span>`;
            if (item.type === 'sight') {
                listItem.classList.add('sight');
            } else if (item.type === 'food') {
                listItem.classList.add('food');
            }
		
		contentList.appendChild(listItem);
            
            const icon = item.type === 'sight' ? sightIcon : foodIcon;
            const marker = L.marker([item.lat, item.lng], { icon: icon }).addTo(map);

            // ë§ˆì»¤ì— ì´ë¯¸ì§€ì™€ ì •ë³´ë¥¼ ë‹´ì€ íŒì—…ì„ ë°”ì¸ë”©í•©ë‹ˆë‹¤.
            const popupContent = `
                <div style="text-align: center;">
                    <h4>${item.name}</h4>
                    <img src="${item.imageUrl}" alt="${item.name}" style="width: 150px; height: auto; border-radius: 5px;">
                </div>
            `;
            marker.bindPopup(popupContent);
            
            marker.originalIcon = icon;
            currentDetailMarkers.push(marker);
            
            const onClick = () => {
                if (selectedDetailMarker) { selectedDetailMarker.setIcon(selectedDetailMarker.originalIcon); }
                if (selectedDetailListItem) { selectedDetailListItem.classList.remove("active"); }
                
                marker.setIcon(redIcon);
                marker.openPopup();
                listItem.classList.add("active");
                
                selectedDetailMarker = marker;
                selectedDetailListItem = listItem;
                
                map.setView([item.lat, item.lng], 15);
            };
            
            listItem.addEventListener("click", onClick);
            marker.on("click", onClick);
        });
    }

    // ë°ìŠ¤í¬í†± ì‚¬ì´ë“œë°” í† ê¸€ í•¨ìˆ˜
    function closeSidebar() {
	    sidebar.classList.add("closed");
	    mapDiv.classList.add("expanded");
	    openBtn.style.display = 'block';
	    toggleBtn.style.display = 'none';
	}
	function openSidebar() {
	    sidebar.classList.remove("closed");
	    mapDiv.classList.remove("expanded");
	    openBtn.style.display = 'none';
	    toggleBtn.style.display = 'block';
	}
    
    // í™”ë©´ í¬ê¸° ë³€ê²½ ê°ì§€ ë° UI ì´ˆê¸°í™”
    function handleResize() {
        if (window.innerWidth <= 768) {
            setupMobileUI();
        } else {
            setupDesktopUI();
        }
    }

    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    toggleBtn.addEventListener("click", closeSidebar);
    openBtn.addEventListener("click", openSidebar);
    showCountryListBtn.addEventListener("click", () => {
        description.classList.add("hidden");
        countryListDiv.classList.remove("hidden");
        showCountryListBtn.classList.add("hidden");
        resetMapAndUI();
        if (selectedCityMarker) {
            selectedCityMarker.setIcon(cityMarkerIcon);
            selectedCityMarker = null;
        }
    });
    backButton.addEventListener("click", () => {
        if (currentView === 'cities') {
            createCountrySlider();
        } else if (currentView === 'details') {
            showCities(currentCountry);
        }
    });
    
    mobileToggleBtn.addEventListener("click", toggleMobileControls);

    // ì´ˆê¸° ì‹¤í–‰
    initMap();
    handleResize();
    window.addEventListener('resize', handleResize);
</script>
</body>
</html>
