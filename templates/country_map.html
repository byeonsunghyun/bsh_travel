<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BSH's Travel</title>
  <link rel="icon" href="../image/favicon.png" type="image/png" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="../css/travel_map.css">
</head>
<body>

  <div class="sidebar" id="sidebar">
    <a href="/bsh_travel/main" title="ë©”ì¸ìœ¼ë¡œ ì´ë™">
      <img src="../image/travel_logo.png" alt="BSH Travel Logo" class="logo" />
    </a>
    <div class="country-list" id="countryList"></div>
    <button id="toggleBtn" title="ì‚¬ì´ë“œë°” ë‹«ê¸°">ğŸ¡„</button>
    <div class="description" id="description"></div>
    <button id="showCountryListBtn" class="title-btn hidden">â† ë‚˜ë¼ ëª©ë¡ ë³´ê¸°</button>
  </div>
  <button id="openBtn" title="ì‚¬ì´ë“œë°” ì—´ê¸°">â˜°</button>

  <div class="mobile-controls" id="mobileControls">
    <div class="country-slider-container">
      <div id="country-slider" class="country-slider"></div>
    </div>
    <div id="info-panel" class="info-panel">
      <button id="back-button" class="back-button hidden">â† ë’¤ë¡œê°€ê¸°</button>
      <div id="content-list"></div>
    </div>
  </div>
  <button id="mobileToggleBtn">â˜°</button>
  <a href="/bsh_travel/main" id="mobileHomeBtn" title="ë©”ì¸ìœ¼ë¡œ ì´ë™">ğŸ </a>

  <div id="map"></div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>
    // ì£¼ìš” DOM ìš”ì†Œ
    const sidebar = document.getElementById("sidebar");
    const description = document.getElementById("description");
    const mapDiv = document.getElementById("map");
    const toggleBtn = document.getElementById("toggleBtn");
    const openBtn = document.getElementById("openBtn");
    const countryListDiv = document.getElementById("countryList");
    const showCountryListBtn = document.getElementById("showCountryListBtn");

    const mobileControls = document.getElementById("mobileControls");
    const countrySlider = document.getElementById("country-slider");
    const infoPanel = document.getElementById("info-panel");
    const contentList = document.getElementById("content-list");
    const backButton = document.getElementById("back-button");
    const mobileToggleBtn = document.getElementById("mobileToggleBtn");
    

    let map, allCityMarkers = [], currentDetailMarkers = [], selectedCityMarker = null, selectedDetailMarker = null, selectedDetailListItem = null;
    let currentView = 'countries'; // 'countries', 'cities', 'details'
    let currentCountry = null;
    let currentCity = null;

    // ê³µí†µ ë°ì´í„° (ìƒëµ)
    const data = [
    {
        name: "ì¼ë³¸",
        cities: [
            {
                name: "ğŸ£ í›„ì¿ ì˜¤ì¹´",
                lat: 33.586309,
                lng: 130.376301,
                desc: "ê°€ë³ê²Œ ë– ë‚˜ê¸° ì¢‹ì€ ê°€ê¹Œìš´ ì—¬í–‰ì§€",
                sights: [
                	{
                        name: "ì˜¤í˜¸ë¦¬ ê³µì›",
                        lat: 33.586309,
                        lng: 130.376301,
                        imageUrl: "../image/image_japan05/place6-1.jpg"
                    },
                    {
                        name: "ì¸ ì•¼íƒ€ ì„œì  ë¡¯í°ë§ˆì¸ ",
                        lat: 33.577405,
                        lng: 130.377996,
                        imageUrl: "../image/image_japan05/place7-1.jpg"
                    }
                ],
                foods: [
                    {
                        name: "ä¸€è˜­ æœ¬ç¤¾ç·æœ¬åº— - ì´ì¹˜ë€ ë¼ë©˜ ë³¸ì ",
                        lat: 33.593222,
                        lng: 130.404563,
                        imageUrl: "../image/image_japan05/food3-3.jpg"
                    },
                    {
                        name: "åšå¤šã‚‚ã¤é‹ æœ‹æ¨‚ - ëª¨ì¸ ë‚˜ë² ",
                        lat: 33.588822,
                        lng: 130.421579,
                        imageUrl: "../image/image_japan05/food5-6.jpg"
                    }
                ]
            },
            {
                name: "ğŸ£ ì‹œëª¨ë…¸ì„¸í‚¤",
                lat: 33.9565664,
                lng: 130.9456336,
                desc: "ê°€ë³ê²Œ ë– ë‚˜ê¸° ì¢‹ì€ ê°€ê¹Œìš´ ì—¬í–‰ì§€",
                sights: [
                    {
                        name: "ê°€ë¼í† ì‹œì¥",
                        lat: 33.9565664,
                        lng: 130.9456336,
                        imageUrl: "../image/image_japan/place1-4.jpg"
                    },
                    {
                        name: "ëª¨ì§€ì½”",
                        lat: 33.9463622,
                        lng: 130.9586796,
                        imageUrl: "../image/image_japan/place2-4.jpg"
                    },
                    {
                        name: "ì•„ì¹´ë¯¸ì‹ ê¶",
                        lat: 33.959165,
                        lng: 130.948917,
                        imageUrl: "../image/image_japan/place3-1.jpg"
                    },
                    {
                        name: "ì˜êµ­ì˜ì‚¬ê´€",
                        lat: 33.9569074,
                        lng: 130.9430147,
                        imageUrl: "../image/image_japan05/place1-1.jpg"
                    },
                    {
                        name: "ì¹´ëí† ìš”ì½”ìµ¸",
                        lat: 33.953191,
                        lng: 130.941130,
                        imageUrl: "../image/image_japan05/place4-1.jpg"
                    }
                ],
                foods: [
                    {
                        
                    }
                ]
            },
            {
                name: "ğŸ£ ìœ í›„ì¸",
                lat: 33.266662,
                lng: 131.368931,
                desc: "ê°€ë³ê²Œ ë– ë‚˜ê¸° ì¢‹ì€ ê°€ê¹Œìš´ ì—¬í–‰ì§€",
                sights: [
                    {
                        name: "í‚¨ë¦° í˜¸ìˆ˜",
                        lat: 33.266662,
                        lng: 131.368931,
                        imageUrl: "../image/image_japan/place3-1.jpg"
                    }
                ],
                foods: [
                    {
                        name: "ã‚†ã‚‹ã‚Šã‚“ - ì—°ì–´ê¹ŒìŠ¤",
                        lat: 33.2627319,
                        lng: 131.3553187,
                        imageUrl: "../image/image_japan/food3-1.jpg"
                    },
                    {
                        name: "B.Bee's - ë²Œê¿€ ì•„ì´ìŠ¤í¬ë¦¼",
                        lat: 33.266318,
                        lng: 131.3621605,
                        imageUrl: "../image/image_japan/food4-3.jpg"
                    },
                    {
                        name: "æ¹¯å¸ƒé™¢é‡‘è³ã‚³ãƒ­ãƒƒã‚± - ê³ ë¡œì¼“",
                        lat: 33.266494,
                        lng: 131.362538,
                        imageUrl: "../image/image_japan/food5-1.jpg"
                    }
                ]
            },
            {
                name: "ğŸ£ ì´í† ì‹œë§ˆ",
                lat: 33.639210,
                lng: 130.197161,
                desc: "ê°€ë³ê²Œ ë– ë‚˜ê¸° ì¢‹ì€ ê°€ê¹Œìš´ ì—¬í–‰ì§€",
                sights: [
                    {
                        name: "ì‚¬ì¿ ë¼ì´ í›„íƒ€ë¯¸ê°€ìš°ë¼",
                        lat: 33.639210,
                        lng: 130.197161,
                        imageUrl: "../image/image_japan05/place8-1.jpg"
                    }
                ],
                foods: [
                    {
                        name: "ç³¸å³¶èŒ¶æˆ¿ - í•«ì¼€ì´í¬",
                        lat: 33.640486,
                        lng: 130.200039,
                        imageUrl: "../image/image_japan05/food4-4.jpg"
                    }
                ]
            }
        ]
    }
];


    // ë§ˆì»¤ ì•„ì´ì½˜ ì •ì˜ (ìƒëµ)
    const redIcon = L.icon({
        iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png',
        iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34],
        shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png', shadowSize: [41, 41]
    });
    const sightIcon = L.icon({
        iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-green.png',
        iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34],
        shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png', shadowSize: [41, 41]
    });
    const foodIcon = L.icon({
        iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-orange.png',
        iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34],
        shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png', shadowSize: [41, 41]
    });
    const cityMarkerIcon = L.icon({
        iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-blue.png',
        iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34],
        shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png', shadowSize: [41, 41]
    });

    // ë§µ ì´ˆê¸°í™”
    function initMap() {
    if (map) map.remove();
    const bounds = [
        [-90, -180],
        [90, 180]
    ];
    map = L.map('map', {
        maxBounds: bounds,
        maxBoundsViscosity: 0.8,
        minZoom: 3,
        maxZoom: 19,
        zoomControl: false // ì´ ë¶€ë¶„ì„ ì¶”ê°€í•˜ì—¬ í™•ëŒ€/ì¶•ì†Œ ë²„íŠ¼ì„ ì œê±°í•©ë‹ˆë‹¤.
    }).setView([30, 120], 2);
    
    // ì´ì „ì— ìˆë˜ L.control.zoom() ì½”ë“œëŠ” ì‚­ì œí•˜ê±°ë‚˜ ì£¼ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
    // L.control.zoom({ position: 'topright' }).addTo(map); 

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);
    const legend = L.control({ position: 'bottomright' });
    legend.onAdd = function (map) {
        const div = L.DomUtil.create('div', 'info legend');
        div.innerHTML = `<p><b>ë§ˆì»¤ ì •ë³´</b></p><p><i style="background:#337ab7;"></i> ë„ì‹œ</p><p><i style="background:#5cb85c;"></i> ê´€ê´‘ì§€</p><p><i style="background:#f0ad4e;"></i> ë§›ì§‘</p>`;
        return div;
    };
    legend.addTo(map);
}
    
    function resetMapAndUI() {
        allCityMarkers.forEach(marker => map.removeLayer(marker));
        allCityMarkers = [];
        currentDetailMarkers.forEach(marker => map.removeLayer(marker));
        currentDetailMarkers = [];
        selectedCityMarker = null;
        selectedDetailMarker = null;
        selectedDetailListItem = null;
        createAllCityMarkers();
    }
    
    function createAllCityMarkers() {
        data.forEach(country => {
            country.cities.forEach(city => {
                const marker = L.marker([city.lat, city.lng], { icon: cityMarkerIcon }).addTo(map);
                marker.bindPopup(city.name);
                marker.on('click', () => {
                    if (window.innerWidth <= 768) {
                        currentCity = city;
                        showDetails(city);
                        mobileControls.classList.add('open');
                    } else {
                        showCityInfo(city);
                    }
                    map.setView([city.lat, city.lng], 10);
                });
                allCityMarkers.push(marker);
            });
        });
    }

    // ë°ìŠ¤í¬í†± UI ë¡œì§
    function setupDesktopUI() {
        mobileControls.style.display = 'none';
        mobileToggleBtn.style.display = 'none';
        sidebar.style.display = 'flex';
        openSidebar();
        createCountryList();
        resetMapAndUI();
    }
    function createCountryList() {
        countryListDiv.innerHTML = "";
        data.forEach(country => {
            const countryBtn = document.createElement("button");
            countryBtn.className = "country-btn title-btn";
            countryBtn.textContent = country.name;
            countryListDiv.appendChild(countryBtn);
            const cityList = document.createElement("div");
            cityList.className = "city-list";
            country.cities.forEach(city => {
                const cityBtn = document.createElement("button");
                cityBtn.className = "city-btn";
                cityBtn.textContent = city.name;
                cityList.appendChild(cityBtn);
                cityBtn.addEventListener("click", () => {
                    showCityInfo(city);
                    
                    // panTo ëŒ€ì‹  flyToë¥¼ ì‚¬ìš©í•˜ê³ , zoom ë ˆë²¨ì„ 10ìœ¼ë¡œ ì§€ì •í•©ë‹ˆë‹¤.
                    const panOffset = [sidebar.offsetWidth / 2, 0];
                    map.flyTo([city.lat, city.lng], 10, {
                        padding: panOffset,
                    });
                });
            });
            countryListDiv.appendChild(cityList);
            countryBtn.addEventListener("click", () => {
                const isOpen = cityList.style.maxHeight !== "0px" && cityList.style.maxHeight !== "";
                document.querySelectorAll(".city-list").forEach(cl => cl.style.maxHeight = "0");
                if (!isOpen) { cityList.style.maxHeight = cityList.scrollHeight + "px"; }
                description.innerHTML = "";
                countryListDiv.classList.remove("hidden");
                showCountryListBtn.classList.add("hidden");
                resetMapAndUI();
            });
        });
    }
    function showCityInfo(city) {
        currentDetailMarkers.forEach(marker => map.removeLayer(marker));
        currentDetailMarkers = [];
        selectedDetailMarker = null;
        selectedDetailListItem = null;
        const cityMarker = allCityMarkers.find(marker => {
            const latLng = marker.getLatLng();
            return latLng.lat === city.lat && latLng.lng === city.lng;
        });
        if (selectedCityMarker) { selectedCityMarker.setIcon(cityMarkerIcon); }
        if (cityMarker) {
            cityMarker.setIcon(redIcon);
            selectedCityMarker = cityMarker;
        }
        description.innerHTML = "";
        description.classList.remove("hidden");
        countryListDiv.classList.add("hidden");
        showCountryListBtn.classList.remove("hidden");
        const cityTitle = document.createElement("h2");
        cityTitle.textContent = city.name;
        description.appendChild(cityTitle);
        const cityDesc = document.createElement("p");
        cityDesc.textContent = city.desc;
        description.appendChild(cityDesc);
        const sightsTitle = document.createElement("h3");
        sightsTitle.textContent = "ğŸ—¼ ê´€ê´‘ì§€";
        description.appendChild(sightsTitle);
        const sightsList = document.createElement("ul");
        sightsList.id = "sights-list";
        description.appendChild(sightsList);
        city.sights.forEach(item => {
            const listItem = document.createElement("li");
            listItem.textContent = item.name;
            sightsList.appendChild(listItem);
            const marker = L.marker([item.lat, item.lng], { icon: sightIcon }).addTo(map);
            const popupContent = `<div style="text-align: center;"><h4>${item.name}</h4><img src="${item.imageUrl}" alt="${item.name}" style="width:150px; height:auto; border-radius: 5px;"></div>`;
            marker.bindPopup(popupContent);
            marker.originalIcon = sightIcon;
            currentDetailMarkers.push(marker);
            const onClick = () => {
                if (selectedDetailMarker) { selectedDetailMarker.setIcon(selectedDetailMarker.originalIcon); }
                if (selectedDetailListItem) { selectedDetailListItem.classList.remove("active"); }
                marker.setIcon(redIcon);
                marker.openPopup();
                listItem.classList.add("active");
                selectedDetailMarker = marker;
                selectedDetailListItem = listItem;
                
                const panOffset = [sidebar.offsetWidth / 2, 0];
                map.flyTo([item.lat, item.lng], 15, {
                    padding: panOffset,
                });
            };
            listItem.addEventListener("click", onClick);
            marker.on("click", onClick);
        });
        const foodsTitle = document.createElement("h3");
        foodsTitle.textContent = "ğŸ½ï¸ ë§›ì§‘";
        description.appendChild(foodsTitle);
        const foodsList = document.createElement("ul");
        foodsList.id = "foods-list";
        description.appendChild(foodsList);
        city.foods.forEach(item => {
            const listItem = document.createElement("li");
            listItem.textContent = item.name;
            foodsList.appendChild(listItem);
            const marker = L.marker([item.lat, item.lng], { icon: foodIcon }).addTo(map);
            const popupContent = `<div style="text-align: center;"><h4>${item.name}</h4><img src="${item.imageUrl}" alt="${item.name}" style="width:150px; height:auto; border-radius: 5px;"></div>`;
            marker.bindPopup(popupContent);
            marker.originalIcon = foodIcon;
            currentDetailMarkers.push(marker);
            const onClick = () => {
                if (selectedDetailMarker) { selectedDetailMarker.setIcon(selectedDetailMarker.originalIcon); }
                if (selectedDetailListItem) { selectedDetailListItem.classList.remove("active"); }
                marker.setIcon(redIcon);
                marker.openPopup();
                listItem.classList.add("active");
                selectedDetailMarker = marker;
                selectedDetailListItem = listItem;
                
                const panOffset = [sidebar.offsetWidth / 2, 0];
                map.flyTo([item.lat, item.lng], 15, {
                    padding: panOffset,
                });
            };
            listItem.addEventListener("click", onClick);
            marker.on("click", onClick);
        });
    }

    // ëª¨ë°”ì¼ UI ë¡œì§
    function setupMobileUI() {
        sidebar.style.display = 'none';
        mobileControls.style.display = 'flex';
        mobileControls.classList.add('closed');
        mobileToggleBtn.style.display = 'flex';
        createCountrySlider();
        resetMapAndUI();
    }
    
    function toggleMobileControls() {
        const isOpen = mobileControls.classList.contains('open');
        if (isOpen) {
            mobileControls.classList.remove('open');
            mobileControls.classList.add('closed');
            mobileToggleBtn.textContent = 'â˜°';
        } else {
            mobileControls.classList.remove('closed');
            mobileControls.classList.add('open');
            mobileToggleBtn.textContent = 'âœ–';
        }
    }
    
    function createCountrySlider() {
        currentView = 'countries';
        infoPanel.style.display = 'none';
        backButton.classList.add('hidden');
        countrySlider.innerHTML = "";
        countrySlider.style.display = 'flex';
        
        data.forEach(country => {
            const countryBtn = document.createElement("button");
            countryBtn.className = "country-btn";
            countryBtn.textContent = country.name;
            countrySlider.appendChild(countryBtn);
            countryBtn.addEventListener('click', () => {
                currentCountry = country;
                showCities(country);
            });
        });
    }
    function showCities(country) {
        currentView = 'cities';
        countrySlider.style.display = 'none';
        infoPanel.style.display = 'block';
        backButton.classList.remove('hidden');
        contentList.innerHTML = `<h4 class="title">${country.name}</h4>`;
        
        country.cities.forEach(city => {
            const listItem = document.createElement("li");
            listItem.textContent = city.name;
            contentList.appendChild(listItem);
            listItem.addEventListener('click', () => {
                currentCity = city;
                showDetails(city);
                map.setView([city.lat, city.lng], 10);
            });
        });
        
        currentDetailMarkers.forEach(marker => map.removeLayer(marker));
        currentDetailMarkers = [];

        allCityMarkers.forEach(marker => map.removeLayer(marker));
        allCityMarkers = [];
        country.cities.forEach(city => {
            const marker = L.marker([city.lat, city.lng], { icon: cityMarkerIcon }).addTo(map);
            marker.on('click', () => {
                currentCity = city;
                showDetails(city);
                map.setView([city.lat, city.lng], 10);
            });
            allCityMarkers.push(marker);
        });
    }
 // `showDetails` í•¨ìˆ˜ ìˆ˜ì •
    function showDetails(city) {
        currentView = 'details';
        backButton.classList.remove('hidden');
        contentList.innerHTML = `<h4 class="title">${city.name}</h4><p>${city.desc}</p>`;
        
        // ëª¨ë°”ì¼ UIì—ì„œëŠ” ë„ì‹œ ë§ˆì»¤ë¥¼ ì§€ìš°ëŠ” ëŒ€ì‹ , ê¸°ì¡´ ë§ˆì»¤ë¥¼ ì¬í™œìš©í•˜ì—¬ ì•„ì´ì½˜ì„ ë³€ê²½í•©ë‹ˆë‹¤.
        allCityMarkers.forEach(marker => map.removeLayer(marker));
        allCityMarkers = [];
        
        const allItems = [...city.sights.map(item => ({ ...item, type: 'sight' })), ...city.foods.map(item => ({ ...item, type: 'food' }))];
        
        currentDetailMarkers.forEach(marker => map.removeLayer(marker));
        currentDetailMarkers = [];
        
        // ë„ì‹œ ë§ˆì»¤ ì•„ì´ì½˜ ë³€ê²½ ë¡œì§ì€ ì œê±°í•˜ê³ , ì„¸ë¶€ ì •ë³´ ë§ˆì»¤ë§Œ í‘œì‹œ
        
        allItems.forEach(item => {
            const listItem = document.createElement("li");
            listItem.innerHTML = `<img src="${item.imageUrl || './image/placeholder.png'}" alt="${item.name}" /><span>${item.name}</span>`;
            contentList.appendChild(listItem);
            
            const icon = item.type === 'sight' ? sightIcon : foodIcon;
            const marker = L.marker([item.lat, item.lng], { icon: icon }).addTo(map);

            // ë§ˆì»¤ì— ì´ë¯¸ì§€ì™€ ì •ë³´ë¥¼ ë‹´ì€ íŒì—…ì„ ë°”ì¸ë”©í•©ë‹ˆë‹¤.
            const popupContent = `
                <div style="text-align: center;">
                    <h4>${item.name}</h4>
                    <img src="${item.imageUrl}" alt="${item.name}" style="width: 150px; height: auto; border-radius: 5px;">
                </div>
            `;
            marker.bindPopup(popupContent);
            
            marker.originalIcon = icon;
            currentDetailMarkers.push(marker);
            
            const onClick = () => {
                if (selectedDetailMarker) { selectedDetailMarker.setIcon(selectedDetailMarker.originalIcon); }
                if (selectedDetailListItem) { selectedDetailListItem.classList.remove("active"); }
                
                marker.setIcon(redIcon);
                marker.openPopup();
                listItem.classList.add("active");
                
                selectedDetailMarker = marker;
                selectedDetailListItem = listItem;
                
                map.setView([item.lat, item.lng], 15);
            };
            
            listItem.addEventListener("click", onClick);
            marker.on("click", onClick);
        });
    }

    // ë°ìŠ¤í¬í†± ì‚¬ì´ë“œë°” í† ê¸€ í•¨ìˆ˜
    function closeSidebar() {
	    sidebar.classList.add("closed");
	    mapDiv.classList.add("expanded");
	    openBtn.style.display = 'block';
	    toggleBtn.style.display = 'none';
	}
	function openSidebar() {
	    sidebar.classList.remove("closed");
	    mapDiv.classList.remove("expanded");
	    openBtn.style.display = 'none';
	    toggleBtn.style.display = 'block';
	}
    
    // í™”ë©´ í¬ê¸° ë³€ê²½ ê°ì§€ ë° UI ì´ˆê¸°í™”
    function handleResize() {
        if (window.innerWidth <= 768) {
            setupMobileUI();
        } else {
            setupDesktopUI();
        }
    }

    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    toggleBtn.addEventListener("click", closeSidebar);
    openBtn.addEventListener("click", openSidebar);
    showCountryListBtn.addEventListener("click", () => {
        description.classList.add("hidden");
        countryListDiv.classList.remove("hidden");
        showCountryListBtn.classList.add("hidden");
        resetMapAndUI();
        if (selectedCityMarker) {
            selectedCityMarker.setIcon(cityMarkerIcon);
            selectedCityMarker = null;
        }
    });
    backButton.addEventListener("click", () => {
        if (currentView === 'cities') {
            createCountrySlider();
        } else if (currentView === 'details') {
            showCities(currentCountry);
        }
    });
    
    mobileToggleBtn.addEventListener("click", toggleMobileControls);

    // ì´ˆê¸° ì‹¤í–‰
    initMap();
    handleResize();
    window.addEventListener('resize', handleResize);
</script>
</body>
</html>
